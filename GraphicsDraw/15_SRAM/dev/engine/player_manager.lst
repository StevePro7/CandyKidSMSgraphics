                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module player_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _global_player_object
                             13 	.globl _engine_player_manager_init
                             14 	.globl _engine_player_manager_update
                             15 	.globl _engine_player_manager_draw
                             16 	.globl _engine_player_getX
                             17 	.globl _engine_player_getY
                             18 ;--------------------------------------------------------
                             19 ; special function registers
                             20 ;--------------------------------------------------------
                             21 ;--------------------------------------------------------
                             22 ; ram data
                             23 ;--------------------------------------------------------
                             24 	.area _DATA
   0000                      25 _global_player_object::
   0000                      26 	.ds 2
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area _INITIALIZED
                             31 ;--------------------------------------------------------
                             32 ; absolute external ram data
                             33 ;--------------------------------------------------------
                             34 	.area _DABS (ABS)
                             35 ;--------------------------------------------------------
                             36 ; global & static initialisations
                             37 ;--------------------------------------------------------
                             38 	.area _HOME
                             39 	.area _GSINIT
                             40 	.area _GSFINAL
                             41 	.area _GSINIT
                             42 ;--------------------------------------------------------
                             43 ; Home
                             44 ;--------------------------------------------------------
                             45 	.area _HOME
                             46 	.area _HOME
                             47 ;--------------------------------------------------------
                             48 ; code
                             49 ;--------------------------------------------------------
                             50 	.area _CODE
                             51 ;player_manager.c:16: void engine_player_manager_init( unsigned char px, unsigned char py )
                             52 ;	---------------------------------
                             53 ; Function engine_player_manager_init
                             54 ; ---------------------------------
   0000                      55 _engine_player_manager_init::
                             56 ;player_manager.c:18: struct_player_object *po = &global_player_object;
   0000 01r00r00      [10]   57 	ld	bc, #_global_player_object+0
                             58 ;player_manager.c:19: po->px = px;
   0003 21 02 00      [10]   59 	ld	hl, #2+0
   0006 39            [11]   60 	add	hl, sp
   0007 7E            [ 7]   61 	ld	a, (hl)
   0008 02            [ 7]   62 	ld	(bc), a
                             63 ;player_manager.c:20: po->py = py;
   0009 03            [ 6]   64 	inc	bc
   000A 21 03 00      [10]   65 	ld	hl, #3+0
   000D 39            [11]   66 	add	hl, sp
   000E 7E            [ 7]   67 	ld	a, (hl)
   000F 02            [ 7]   68 	ld	(bc), a
   0010 C9            [10]   69 	ret
                             70 ;player_manager.c:23: void engine_player_manager_update( char dx, char dy )
                             71 ;	---------------------------------
                             72 ; Function engine_player_manager_update
                             73 ; ---------------------------------
   0011                      74 _engine_player_manager_update::
                             75 ;player_manager.c:25: struct_player_object *po = &global_player_object;
   0011 21r00r00      [10]   76 	ld	hl, #_global_player_object+0
                             77 ;player_manager.c:27: po->px += dx * PLAYER_VELOCITY;
   0014 4E            [ 7]   78 	ld	c, (hl)
   0015 FD 21 02 00   [14]   79 	ld	iy, #2
   0019 FD 39         [15]   80 	add	iy, sp
   001B FD 7E 00      [19]   81 	ld	a, 0 (iy)
   001E 87            [ 4]   82 	add	a, a
   001F 81            [ 4]   83 	add	a,c
   0020 77            [ 7]   84 	ld	(hl), a
                             85 ;player_manager.c:28: po->py += dy * PLAYER_VELOCITY;
   0021 23            [ 6]   86 	inc	hl
   0022 4E            [ 7]   87 	ld	c, (hl)
   0023 FD 21 03 00   [14]   88 	ld	iy, #3
   0027 FD 39         [15]   89 	add	iy, sp
   0029 FD 7E 00      [19]   90 	ld	a, 0 (iy)
   002C 87            [ 4]   91 	add	a, a
   002D 81            [ 4]   92 	add	a,c
   002E 77            [ 7]   93 	ld	(hl), a
   002F C9            [10]   94 	ret
                             95 ;player_manager.c:48: void engine_player_manager_draw()
                             96 ;	---------------------------------
                             97 ; Function engine_player_manager_draw
                             98 ; ---------------------------------
   0030                      99 _engine_player_manager_draw::
                            100 ;player_manager.c:50: struct_player_object *po = &global_player_object;
                            101 ;player_manager.c:52: devkit_SMS_addSprite( po->px + 0, po->py + 0, PLAYER_SPRITE_TILE + 0 );
   0030 21r01r00      [10]  102 	ld	hl, #(_global_player_object + 0x0001) + 0
   0033 46            [ 7]  103 	ld	b, (hl)
   0034 21r00r00      [10]  104 	ld	hl, #_global_player_object + 0
   0037 56            [ 7]  105 	ld	d, (hl)
   0038 21 00 01      [10]  106 	ld	hl, #0x0100
   003B E5            [11]  107 	push	hl
   003C 4A            [ 4]  108 	ld	c, d
   003D C5            [11]  109 	push	bc
   003E CDr00r00      [17]  110 	call	_devkit_SMS_addSprite
   0041 F1            [10]  111 	pop	af
   0042 F1            [10]  112 	pop	af
                            113 ;player_manager.c:53: devkit_SMS_addSprite( po->px + 8, po->py + 0, PLAYER_SPRITE_TILE + 1 );
   0043 21r01r00      [10]  114 	ld	hl, #(_global_player_object + 0x0001) + 0
   0046 46            [ 7]  115 	ld	b, (hl)
   0047 3Ar00r00      [13]  116 	ld	a, (#_global_player_object + 0)
   004A C6 08         [ 7]  117 	add	a, #0x08
   004C 57            [ 4]  118 	ld	d, a
   004D 21 01 01      [10]  119 	ld	hl, #0x0101
   0050 E5            [11]  120 	push	hl
   0051 4A            [ 4]  121 	ld	c, d
   0052 C5            [11]  122 	push	bc
   0053 CDr00r00      [17]  123 	call	_devkit_SMS_addSprite
   0056 F1            [10]  124 	pop	af
   0057 F1            [10]  125 	pop	af
                            126 ;player_manager.c:54: devkit_SMS_addSprite( po->px + 0, po->py + 8, PLAYER_SPRITE_TILE + 2 );
   0058 3Ar01r00      [13]  127 	ld	a, (#(_global_player_object + 0x0001) + 0)
   005B C6 08         [ 7]  128 	add	a, #0x08
   005D 47            [ 4]  129 	ld	b, a
   005E 21r00r00      [10]  130 	ld	hl, #_global_player_object + 0
   0061 56            [ 7]  131 	ld	d, (hl)
   0062 21 02 01      [10]  132 	ld	hl, #0x0102
   0065 E5            [11]  133 	push	hl
   0066 4A            [ 4]  134 	ld	c, d
   0067 C5            [11]  135 	push	bc
   0068 CDr00r00      [17]  136 	call	_devkit_SMS_addSprite
   006B F1            [10]  137 	pop	af
   006C F1            [10]  138 	pop	af
                            139 ;player_manager.c:55: devkit_SMS_addSprite( po->px + 8, po->py + 8, PLAYER_SPRITE_TILE + 3 );
   006D 3Ar01r00      [13]  140 	ld	a, (#(_global_player_object + 0x0001) + 0)
   0070 C6 08         [ 7]  141 	add	a, #0x08
   0072 4F            [ 4]  142 	ld	c, a
   0073 3Ar00r00      [13]  143 	ld	a, (#_global_player_object + 0)
   0076 C6 08         [ 7]  144 	add	a, #0x08
   0078 47            [ 4]  145 	ld	b, a
   0079 21 03 01      [10]  146 	ld	hl, #0x0103
   007C E5            [11]  147 	push	hl
   007D 79            [ 4]  148 	ld	a, c
   007E F5            [11]  149 	push	af
   007F 33            [ 6]  150 	inc	sp
   0080 C5            [11]  151 	push	bc
   0081 33            [ 6]  152 	inc	sp
   0082 CDr00r00      [17]  153 	call	_devkit_SMS_addSprite
   0085 F1            [10]  154 	pop	af
   0086 F1            [10]  155 	pop	af
   0087 C9            [10]  156 	ret
                            157 ;player_manager.c:58: unsigned char engine_player_getX()
                            158 ;	---------------------------------
                            159 ; Function engine_player_getX
                            160 ; ---------------------------------
   0088                     161 _engine_player_getX::
                            162 ;player_manager.c:60: struct_player_object *po = &global_player_object;
                            163 ;player_manager.c:61: return po->px;
   0088 21r00r00      [10]  164 	ld	hl, #_global_player_object + 0
   008B 6E            [ 7]  165 	ld	l, (hl)
   008C C9            [10]  166 	ret
                            167 ;player_manager.c:63: unsigned char engine_player_getY()
                            168 ;	---------------------------------
                            169 ; Function engine_player_getY
                            170 ; ---------------------------------
   008D                     171 _engine_player_getY::
                            172 ;player_manager.c:65: struct_player_object *po = &global_player_object;
                            173 ;player_manager.c:66: return po->py;
   008D 21r01r00      [10]  174 	ld	hl, #_global_player_object + 1
   0090 6E            [ 7]  175 	ld	l, (hl)
   0091 C9            [10]  176 	ret
                            177 	.area _CODE
                            178 	.area _INITIALIZER
                            179 	.area _CABS (ABS)
