                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _engine_font_manager_draw_text
                             13 	.globl _engine_screen_manager_init
                             14 	.globl _engine_screen_manager_update
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;screen_manager.c:11: void engine_screen_manager_init()
                             47 ;	---------------------------------
                             48 ; Function engine_screen_manager_init
                             49 ; ---------------------------------
   0000                      50 _engine_screen_manager_init::
                             51 ;screen_manager.c:13: engine_font_manager_draw_text( SPRITE_TILES_TEXT, 2, 0 );
   0000 21 02 00      [10]   52 	ld	hl,#0x0002
   0003 E5            [11]   53 	push	hl
   0004 21r0Er00      [10]   54 	ld	hl,#___str_0
   0007 E5            [11]   55 	push	hl
   0008 CDr00r00      [17]   56 	call	_engine_font_manager_draw_text
   000B F1            [10]   57 	pop	af
   000C F1            [10]   58 	pop	af
   000D C9            [10]   59 	ret
   000E                      60 ___str_0:
   000E 53 50 52 49 54 45    61 	.ascii "SPRITE TILES LOADED..."
        20 54 49 4C 45 53
        20 4C 4F 41 44 45
        44 2E 2E 2E
   0024 00                   62 	.db 0x00
                             63 ;screen_manager.c:16: void engine_screen_manager_update()
                             64 ;	---------------------------------
                             65 ; Function engine_screen_manager_update
                             66 ; ---------------------------------
   0025                      67 _engine_screen_manager_update::
                             68 ;screen_manager.c:19: draw_sprites( 48, 32, idx + 0 );
   0025 21 20 06      [10]   69 	ld	hl,#0x0620
   0028 E5            [11]   70 	push	hl
   0029 3E 30         [ 7]   71 	ld	a,#0x30
   002B F5            [11]   72 	push	af
   002C 33            [ 6]   73 	inc	sp
   002D CDr87r00      [17]   74 	call	_draw_sprites
                             75 ;screen_manager.c:20: draw_sprites( 80, 32, idx + 1 );
   0030 33            [ 6]   76 	inc	sp
   0031 21 20 07      [10]   77 	ld	hl,#0x0720
   0034 E3            [19]   78 	ex	(sp),hl
   0035 3E 50         [ 7]   79 	ld	a,#0x50
   0037 F5            [11]   80 	push	af
   0038 33            [ 6]   81 	inc	sp
   0039 CDr87r00      [17]   82 	call	_draw_sprites
                             83 ;screen_manager.c:22: draw_sprites( 48, 64, idx + 2 );
   003C 33            [ 6]   84 	inc	sp
   003D 21 40 08      [10]   85 	ld	hl,#0x0840
   0040 E3            [19]   86 	ex	(sp),hl
   0041 3E 30         [ 7]   87 	ld	a,#0x30
   0043 F5            [11]   88 	push	af
   0044 33            [ 6]   89 	inc	sp
   0045 CDr87r00      [17]   90 	call	_draw_sprites
                             91 ;screen_manager.c:23: draw_sprites( 80, 64, idx + 3 );
   0048 33            [ 6]   92 	inc	sp
   0049 21 40 09      [10]   93 	ld	hl,#0x0940
   004C E3            [19]   94 	ex	(sp),hl
   004D 3E 50         [ 7]   95 	ld	a,#0x50
   004F F5            [11]   96 	push	af
   0050 33            [ 6]   97 	inc	sp
   0051 CDr87r00      [17]   98 	call	_draw_sprites
                             99 ;screen_manager.c:25: draw_sprites( 48, 96, idx + 4 );
   0054 33            [ 6]  100 	inc	sp
   0055 21 60 0A      [10]  101 	ld	hl,#0x0a60
   0058 E3            [19]  102 	ex	(sp),hl
   0059 3E 30         [ 7]  103 	ld	a,#0x30
   005B F5            [11]  104 	push	af
   005C 33            [ 6]  105 	inc	sp
   005D CDr87r00      [17]  106 	call	_draw_sprites
                            107 ;screen_manager.c:26: draw_sprites( 80, 96, idx + 5 );
   0060 33            [ 6]  108 	inc	sp
   0061 21 60 0B      [10]  109 	ld	hl,#0x0b60
   0064 E3            [19]  110 	ex	(sp),hl
   0065 3E 50         [ 7]  111 	ld	a,#0x50
   0067 F5            [11]  112 	push	af
   0068 33            [ 6]  113 	inc	sp
   0069 CDr87r00      [17]  114 	call	_draw_sprites
                            115 ;screen_manager.c:28: draw_sprites( 48, 128, idx + 6 );
   006C 33            [ 6]  116 	inc	sp
   006D 21 80 0C      [10]  117 	ld	hl,#0x0c80
   0070 E3            [19]  118 	ex	(sp),hl
   0071 3E 30         [ 7]  119 	ld	a,#0x30
   0073 F5            [11]  120 	push	af
   0074 33            [ 6]  121 	inc	sp
   0075 CDr87r00      [17]  122 	call	_draw_sprites
                            123 ;screen_manager.c:29: draw_sprites( 80, 128, idx + 7 );
   0078 33            [ 6]  124 	inc	sp
   0079 21 80 0D      [10]  125 	ld	hl,#0x0d80
   007C E3            [19]  126 	ex	(sp),hl
   007D 3E 50         [ 7]  127 	ld	a,#0x50
   007F F5            [11]  128 	push	af
   0080 33            [ 6]  129 	inc	sp
   0081 CDr87r00      [17]  130 	call	_draw_sprites
   0084 F1            [10]  131 	pop	af
   0085 33            [ 6]  132 	inc	sp
   0086 C9            [10]  133 	ret
                            134 ;screen_manager.c:34: static void draw_sprites( unsigned char x, unsigned char y, unsigned char idx)
                            135 ;	---------------------------------
                            136 ; Function draw_sprites
                            137 ; ---------------------------------
   0087                     138 _draw_sprites:
   0087 DD E5         [15]  139 	push	ix
   0089 DD 21 00 00   [14]  140 	ld	ix,#0
   008D DD 39         [15]  141 	add	ix,sp
                            142 ;screen_manager.c:36: unsigned int tile = 256 + idx * 4;
   008F DD 6E 06      [19]  143 	ld	l,6 (ix)
   0092 26 00         [ 7]  144 	ld	h,#0x00
   0094 29            [11]  145 	add	hl, hl
   0095 29            [11]  146 	add	hl, hl
   0096 01 00 01      [10]  147 	ld	bc,#0x0100
   0099 09            [11]  148 	add	hl,bc
   009A 4D            [ 4]  149 	ld	c,l
   009B 44            [ 4]  150 	ld	b,h
                            151 ;screen_manager.c:38: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   009C C5            [11]  152 	push	bc
   009D C5            [11]  153 	push	bc
   009E DD 66 05      [19]  154 	ld	h,5 (ix)
   00A1 DD 6E 04      [19]  155 	ld	l,4 (ix)
   00A4 E5            [11]  156 	push	hl
   00A5 CDr00r00      [17]  157 	call	_devkit_SMS_addSprite
   00A8 F1            [10]  158 	pop	af
   00A9 F1            [10]  159 	pop	af
   00AA C1            [10]  160 	pop	bc
                            161 ;screen_manager.c:39: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   00AB 69            [ 4]  162 	ld	l, c
   00AC 60            [ 4]  163 	ld	h, b
   00AD 23            [ 6]  164 	inc	hl
   00AE DD 7E 04      [19]  165 	ld	a,4 (ix)
   00B1 C6 08         [ 7]  166 	add	a, #0x08
   00B3 5F            [ 4]  167 	ld	e,a
   00B4 C5            [11]  168 	push	bc
   00B5 D5            [11]  169 	push	de
   00B6 E5            [11]  170 	push	hl
   00B7 DD 56 05      [19]  171 	ld	d, 5 (ix)
   00BA D5            [11]  172 	push	de
   00BB CDr00r00      [17]  173 	call	_devkit_SMS_addSprite
   00BE F1            [10]  174 	pop	af
   00BF F1            [10]  175 	pop	af
   00C0 D1            [10]  176 	pop	de
   00C1 C1            [10]  177 	pop	bc
                            178 ;screen_manager.c:40: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   00C2 69            [ 4]  179 	ld	l, c
   00C3 60            [ 4]  180 	ld	h, b
   00C4 23            [ 6]  181 	inc	hl
   00C5 23            [ 6]  182 	inc	hl
   00C6 DD 7E 05      [19]  183 	ld	a,5 (ix)
   00C9 C6 08         [ 7]  184 	add	a, #0x08
   00CB 57            [ 4]  185 	ld	d,a
   00CC C5            [11]  186 	push	bc
   00CD D5            [11]  187 	push	de
   00CE E5            [11]  188 	push	hl
   00CF D5            [11]  189 	push	de
   00D0 33            [ 6]  190 	inc	sp
   00D1 DD 7E 04      [19]  191 	ld	a,4 (ix)
   00D4 F5            [11]  192 	push	af
   00D5 33            [ 6]  193 	inc	sp
   00D6 CDr00r00      [17]  194 	call	_devkit_SMS_addSprite
   00D9 F1            [10]  195 	pop	af
   00DA F1            [10]  196 	pop	af
   00DB D1            [10]  197 	pop	de
   00DC C1            [10]  198 	pop	bc
                            199 ;screen_manager.c:41: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   00DD 03            [ 6]  200 	inc	bc
   00DE 03            [ 6]  201 	inc	bc
   00DF 03            [ 6]  202 	inc	bc
   00E0 C5            [11]  203 	push	bc
   00E1 D5            [11]  204 	push	de
   00E2 CDr00r00      [17]  205 	call	_devkit_SMS_addSprite
   00E5 F1            [10]  206 	pop	af
   00E6 F1            [10]  207 	pop	af
   00E7 DD E1         [14]  208 	pop	ix
   00E9 C9            [10]  209 	ret
                            210 ;screen_manager.c:64: static void draw_adriana()
                            211 ;	---------------------------------
                            212 ; Function draw_adriana
                            213 ; ---------------------------------
   00EA                     214 _draw_adriana:
                            215 ;screen_manager.c:70: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   00EA 21 40 01      [10]  216 	ld	hl,#0x0140
   00ED E5            [11]  217 	push	hl
   00EE 21 B0 20      [10]  218 	ld	hl,#0x20b0
   00F1 E5            [11]  219 	push	hl
   00F2 CDr00r00      [17]  220 	call	_devkit_SMS_addSprite
   00F5 F1            [10]  221 	pop	af
                            222 ;screen_manager.c:71: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   00F6 21 41 01      [10]  223 	ld	hl, #0x0141
   00F9 E3            [19]  224 	ex	(sp),hl
   00FA 21 B8 20      [10]  225 	ld	hl,#0x20b8
   00FD E5            [11]  226 	push	hl
   00FE CDr00r00      [17]  227 	call	_devkit_SMS_addSprite
   0101 F1            [10]  228 	pop	af
                            229 ;screen_manager.c:72: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   0102 21 42 01      [10]  230 	ld	hl, #0x0142
   0105 E3            [19]  231 	ex	(sp),hl
   0106 21 B0 28      [10]  232 	ld	hl,#0x28b0
   0109 E5            [11]  233 	push	hl
   010A CDr00r00      [17]  234 	call	_devkit_SMS_addSprite
   010D F1            [10]  235 	pop	af
                            236 ;screen_manager.c:73: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   010E 21 43 01      [10]  237 	ld	hl, #0x0143
   0111 E3            [19]  238 	ex	(sp),hl
   0112 21 B8 28      [10]  239 	ld	hl,#0x28b8
   0115 E5            [11]  240 	push	hl
   0116 CDr00r00      [17]  241 	call	_devkit_SMS_addSprite
   0119 F1            [10]  242 	pop	af
   011A F1            [10]  243 	pop	af
   011B C9            [10]  244 	ret
                            245 	.area _CODE
                            246 	.area _INITIALIZER
                            247 	.area _CABS (ABS)
