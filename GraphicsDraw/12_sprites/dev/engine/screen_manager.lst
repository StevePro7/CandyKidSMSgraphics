                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _engine_input_manager_move_fire1
                             13 	.globl _engine_font_manager_draw_text
                             14 	.globl _engine_screen_manager_init
                             15 	.globl _engine_screen_manager_update
                             16 ;--------------------------------------------------------
                             17 ; special function registers
                             18 ;--------------------------------------------------------
                             19 ;--------------------------------------------------------
                             20 ; ram data
                             21 ;--------------------------------------------------------
                             22 	.area _DATA
                             23 ;--------------------------------------------------------
                             24 ; ram data
                             25 ;--------------------------------------------------------
                             26 	.area _INITIALIZED
                             27 ;--------------------------------------------------------
                             28 ; absolute external ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DABS (ABS)
                             31 ;--------------------------------------------------------
                             32 ; global & static initialisations
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _GSINIT
                             36 	.area _GSFINAL
                             37 	.area _GSINIT
                             38 ;--------------------------------------------------------
                             39 ; Home
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _HOME
                             43 ;--------------------------------------------------------
                             44 ; code
                             45 ;--------------------------------------------------------
                             46 	.area _CODE
                             47 ;screen_manager.c:13: void engine_screen_manager_init()
                             48 ;	---------------------------------
                             49 ; Function engine_screen_manager_init
                             50 ; ---------------------------------
   0000                      51 _engine_screen_manager_init::
                             52 ;screen_manager.c:15: engine_font_manager_draw_text( SPRITE_TILES_TEXT, 2, 0 );
   0000 21 02 00      [10]   53 	ld	hl, #0x0002
   0003 E5            [11]   54 	push	hl
   0004 21r0Er00      [10]   55 	ld	hl, #___str_0
   0007 E5            [11]   56 	push	hl
   0008 CDr00r00      [17]   57 	call	_engine_font_manager_draw_text
   000B F1            [10]   58 	pop	af
   000C F1            [10]   59 	pop	af
   000D C9            [10]   60 	ret
   000E                      61 ___str_0:
   000E 53 50 52 49 54 45    62 	.ascii "SPRITE TILES LOADED..."
        20 54 49 4C 45 53
        20 4C 4F 41 44 45
        44 2E 2E 2E
   0024 00                   63 	.db 0x00
                             64 ;screen_manager.c:18: void engine_screen_manager_update()
                             65 ;	---------------------------------
                             66 ; Function engine_screen_manager_update
                             67 ; ---------------------------------
   0025                      68 _engine_screen_manager_update::
                             69 ;screen_manager.c:23: draw_sprites( 48, 32, idx + 0 );
   0025 21 20 06      [10]   70 	ld	hl, #0x0620
   0028 E5            [11]   71 	push	hl
   0029 3E 30         [ 7]   72 	ld	a, #0x30
   002B F5            [11]   73 	push	af
   002C 33            [ 6]   74 	inc	sp
   002D CDr91r00      [17]   75 	call	_draw_sprites
                             76 ;screen_manager.c:24: draw_sprites( 80, 32, idx + 1 );
   0030 33            [ 6]   77 	inc	sp
   0031 21 20 07      [10]   78 	ld	hl,#0x0720
   0034 E3            [19]   79 	ex	(sp),hl
   0035 3E 50         [ 7]   80 	ld	a, #0x50
   0037 F5            [11]   81 	push	af
   0038 33            [ 6]   82 	inc	sp
   0039 CDr91r00      [17]   83 	call	_draw_sprites
                             84 ;screen_manager.c:26: draw_sprites( 48, 64, idx + 2 );
   003C 33            [ 6]   85 	inc	sp
   003D 21 40 08      [10]   86 	ld	hl,#0x0840
   0040 E3            [19]   87 	ex	(sp),hl
   0041 3E 30         [ 7]   88 	ld	a, #0x30
   0043 F5            [11]   89 	push	af
   0044 33            [ 6]   90 	inc	sp
   0045 CDr91r00      [17]   91 	call	_draw_sprites
                             92 ;screen_manager.c:27: draw_sprites( 80, 64, idx + 3 );
   0048 33            [ 6]   93 	inc	sp
   0049 21 40 09      [10]   94 	ld	hl,#0x0940
   004C E3            [19]   95 	ex	(sp),hl
   004D 3E 50         [ 7]   96 	ld	a, #0x50
   004F F5            [11]   97 	push	af
   0050 33            [ 6]   98 	inc	sp
   0051 CDr91r00      [17]   99 	call	_draw_sprites
                            100 ;screen_manager.c:29: draw_sprites( 48, 96, idx + 4 );
   0054 33            [ 6]  101 	inc	sp
   0055 21 60 0A      [10]  102 	ld	hl,#0x0a60
   0058 E3            [19]  103 	ex	(sp),hl
   0059 3E 30         [ 7]  104 	ld	a, #0x30
   005B F5            [11]  105 	push	af
   005C 33            [ 6]  106 	inc	sp
   005D CDr91r00      [17]  107 	call	_draw_sprites
                            108 ;screen_manager.c:30: draw_sprites( 80, 96, idx + 5 );
   0060 33            [ 6]  109 	inc	sp
   0061 21 60 0B      [10]  110 	ld	hl,#0x0b60
   0064 E3            [19]  111 	ex	(sp),hl
   0065 3E 50         [ 7]  112 	ld	a, #0x50
   0067 F5            [11]  113 	push	af
   0068 33            [ 6]  114 	inc	sp
   0069 CDr91r00      [17]  115 	call	_draw_sprites
                            116 ;screen_manager.c:32: draw_sprites( 48, 128, idx + 6 );
   006C 33            [ 6]  117 	inc	sp
   006D 21 80 0C      [10]  118 	ld	hl,#0x0c80
   0070 E3            [19]  119 	ex	(sp),hl
   0071 3E 30         [ 7]  120 	ld	a, #0x30
   0073 F5            [11]  121 	push	af
   0074 33            [ 6]  122 	inc	sp
   0075 CDr91r00      [17]  123 	call	_draw_sprites
                            124 ;screen_manager.c:33: draw_sprites( 80, 128, idx + 7 );
   0078 33            [ 6]  125 	inc	sp
   0079 21 80 0D      [10]  126 	ld	hl,#0x0d80
   007C E3            [19]  127 	ex	(sp),hl
   007D 3E 50         [ 7]  128 	ld	a, #0x50
   007F F5            [11]  129 	push	af
   0080 33            [ 6]  130 	inc	sp
   0081 CDr91r00      [17]  131 	call	_draw_sprites
   0084 F1            [10]  132 	pop	af
   0085 33            [ 6]  133 	inc	sp
                            134 ;screen_manager.c:35: input = engine_input_manager_move_fire1();
   0086 CDr00r00      [17]  135 	call	_engine_input_manager_move_fire1
                            136 ;screen_manager.c:36: if( input )
   0089 7D            [ 4]  137 	ld	a, l
   008A B7            [ 4]  138 	or	a, a
                            139 ;screen_manager.c:38: draw_skullnc();
   008B C2r56r01      [10]  140 	jp	NZ,_draw_skullnc
                            141 ;screen_manager.c:42: draw_candykd();
   008E C3rF4r00      [10]  142 	jp  _draw_candykd
                            143 ;screen_manager.c:46: static void draw_sprites( unsigned char x, unsigned char y, unsigned char idx)
                            144 ;	---------------------------------
                            145 ; Function draw_sprites
                            146 ; ---------------------------------
   0091                     147 _draw_sprites:
   0091 DD E5         [15]  148 	push	ix
   0093 DD 21 00 00   [14]  149 	ld	ix,#0
   0097 DD 39         [15]  150 	add	ix,sp
                            151 ;screen_manager.c:48: unsigned int tile = 256 + idx * 4;
   0099 DD 6E 06      [19]  152 	ld	l, 6 (ix)
   009C 26 00         [ 7]  153 	ld	h, #0x00
   009E 29            [11]  154 	add	hl, hl
   009F 29            [11]  155 	add	hl, hl
   00A0 01 00 01      [10]  156 	ld	bc,#0x0100
   00A3 09            [11]  157 	add	hl,bc
   00A4 4D            [ 4]  158 	ld	c, l
   00A5 44            [ 4]  159 	ld	b, h
                            160 ;screen_manager.c:50: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   00A6 C5            [11]  161 	push	bc
   00A7 C5            [11]  162 	push	bc
   00A8 DD 66 05      [19]  163 	ld	h, 5 (ix)
   00AB DD 6E 04      [19]  164 	ld	l, 4 (ix)
   00AE E5            [11]  165 	push	hl
   00AF CDr00r00      [17]  166 	call	_devkit_SMS_addSprite
   00B2 F1            [10]  167 	pop	af
   00B3 F1            [10]  168 	pop	af
   00B4 C1            [10]  169 	pop	bc
                            170 ;screen_manager.c:51: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   00B5 69            [ 4]  171 	ld	l, c
   00B6 60            [ 4]  172 	ld	h, b
   00B7 23            [ 6]  173 	inc	hl
   00B8 DD 7E 04      [19]  174 	ld	a, 4 (ix)
   00BB C6 08         [ 7]  175 	add	a, #0x08
   00BD 5F            [ 4]  176 	ld	e, a
   00BE C5            [11]  177 	push	bc
   00BF D5            [11]  178 	push	de
   00C0 E5            [11]  179 	push	hl
   00C1 DD 56 05      [19]  180 	ld	d, 5 (ix)
   00C4 D5            [11]  181 	push	de
   00C5 CDr00r00      [17]  182 	call	_devkit_SMS_addSprite
   00C8 F1            [10]  183 	pop	af
   00C9 F1            [10]  184 	pop	af
   00CA D1            [10]  185 	pop	de
   00CB C1            [10]  186 	pop	bc
                            187 ;screen_manager.c:52: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   00CC 69            [ 4]  188 	ld	l, c
   00CD 60            [ 4]  189 	ld	h, b
   00CE 23            [ 6]  190 	inc	hl
   00CF 23            [ 6]  191 	inc	hl
   00D0 DD 7E 05      [19]  192 	ld	a, 5 (ix)
   00D3 C6 08         [ 7]  193 	add	a, #0x08
   00D5 57            [ 4]  194 	ld	d, a
   00D6 C5            [11]  195 	push	bc
   00D7 D5            [11]  196 	push	de
   00D8 E5            [11]  197 	push	hl
   00D9 D5            [11]  198 	push	de
   00DA 33            [ 6]  199 	inc	sp
   00DB DD 7E 04      [19]  200 	ld	a, 4 (ix)
   00DE F5            [11]  201 	push	af
   00DF 33            [ 6]  202 	inc	sp
   00E0 CDr00r00      [17]  203 	call	_devkit_SMS_addSprite
   00E3 F1            [10]  204 	pop	af
   00E4 F1            [10]  205 	pop	af
   00E5 D1            [10]  206 	pop	de
   00E6 C1            [10]  207 	pop	bc
                            208 ;screen_manager.c:53: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   00E7 03            [ 6]  209 	inc	bc
   00E8 03            [ 6]  210 	inc	bc
   00E9 03            [ 6]  211 	inc	bc
   00EA C5            [11]  212 	push	bc
   00EB D5            [11]  213 	push	de
   00EC CDr00r00      [17]  214 	call	_devkit_SMS_addSprite
   00EF F1            [10]  215 	pop	af
   00F0 F1            [10]  216 	pop	af
   00F1 DD E1         [14]  217 	pop	ix
   00F3 C9            [10]  218 	ret
                            219 ;screen_manager.c:55: static void draw_candykd()
                            220 ;	---------------------------------
                            221 ; Function draw_candykd
                            222 ; ---------------------------------
   00F4                     223 _draw_candykd:
                            224 ;screen_manager.c:61: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   00F4 21 30 01      [10]  225 	ld	hl, #0x0130
   00F7 E5            [11]  226 	push	hl
   00F8 21 B0 20      [10]  227 	ld	hl, #0x20b0
   00FB E5            [11]  228 	push	hl
   00FC CDr00r00      [17]  229 	call	_devkit_SMS_addSprite
   00FF F1            [10]  230 	pop	af
                            231 ;screen_manager.c:62: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   0100 21 31 01      [10]  232 	ld	hl, #0x0131
   0103 E3            [19]  233 	ex	(sp),hl
   0104 21 B8 20      [10]  234 	ld	hl, #0x20b8
   0107 E5            [11]  235 	push	hl
   0108 CDr00r00      [17]  236 	call	_devkit_SMS_addSprite
   010B F1            [10]  237 	pop	af
                            238 ;screen_manager.c:63: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   010C 21 32 01      [10]  239 	ld	hl, #0x0132
   010F E3            [19]  240 	ex	(sp),hl
   0110 21 B0 28      [10]  241 	ld	hl, #0x28b0
   0113 E5            [11]  242 	push	hl
   0114 CDr00r00      [17]  243 	call	_devkit_SMS_addSprite
   0117 F1            [10]  244 	pop	af
                            245 ;screen_manager.c:64: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   0118 21 33 01      [10]  246 	ld	hl, #0x0133
   011B E3            [19]  247 	ex	(sp),hl
   011C 21 B8 28      [10]  248 	ld	hl, #0x28b8
   011F E5            [11]  249 	push	hl
   0120 CDr00r00      [17]  250 	call	_devkit_SMS_addSprite
   0123 F1            [10]  251 	pop	af
                            252 ;screen_manager.c:66: devkit_SMS_addSprite( x + 0, y + 40, tile + 0 );
   0124 21 30 01      [10]  253 	ld	hl, #0x0130
   0127 E3            [19]  254 	ex	(sp),hl
   0128 21 B0 48      [10]  255 	ld	hl, #0x48b0
   012B E5            [11]  256 	push	hl
   012C CDr00r00      [17]  257 	call	_devkit_SMS_addSprite
   012F F1            [10]  258 	pop	af
                            259 ;screen_manager.c:67: devkit_SMS_addSprite( x + 8, y + 40, tile + 1 );
   0130 21 31 01      [10]  260 	ld	hl, #0x0131
   0133 E3            [19]  261 	ex	(sp),hl
   0134 21 B8 48      [10]  262 	ld	hl, #0x48b8
   0137 E5            [11]  263 	push	hl
   0138 CDr00r00      [17]  264 	call	_devkit_SMS_addSprite
   013B F1            [10]  265 	pop	af
                            266 ;screen_manager.c:68: devkit_SMS_addSprite( x + 0, y + 48, tile + 2 );
   013C 21 32 01      [10]  267 	ld	hl, #0x0132
   013F E3            [19]  268 	ex	(sp),hl
   0140 21 B0 50      [10]  269 	ld	hl, #0x50b0
   0143 E5            [11]  270 	push	hl
   0144 CDr00r00      [17]  271 	call	_devkit_SMS_addSprite
   0147 F1            [10]  272 	pop	af
                            273 ;screen_manager.c:69: devkit_SMS_addSprite( x + 8, y + 48, tile + 3 );
   0148 21 33 01      [10]  274 	ld	hl, #0x0133
   014B E3            [19]  275 	ex	(sp),hl
   014C 21 B8 50      [10]  276 	ld	hl, #0x50b8
   014F E5            [11]  277 	push	hl
   0150 CDr00r00      [17]  278 	call	_devkit_SMS_addSprite
   0153 F1            [10]  279 	pop	af
   0154 F1            [10]  280 	pop	af
   0155 C9            [10]  281 	ret
                            282 ;screen_manager.c:71: static void draw_skullnc()
                            283 ;	---------------------------------
                            284 ; Function draw_skullnc
                            285 ; ---------------------------------
   0156                     286 _draw_skullnc:
                            287 ;screen_manager.c:77: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   0156 21 40 01      [10]  288 	ld	hl, #0x0140
   0159 E5            [11]  289 	push	hl
   015A 21 B0 20      [10]  290 	ld	hl, #0x20b0
   015D E5            [11]  291 	push	hl
   015E CDr00r00      [17]  292 	call	_devkit_SMS_addSprite
   0161 F1            [10]  293 	pop	af
                            294 ;screen_manager.c:78: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   0162 21 41 01      [10]  295 	ld	hl, #0x0141
   0165 E3            [19]  296 	ex	(sp),hl
   0166 21 B8 20      [10]  297 	ld	hl, #0x20b8
   0169 E5            [11]  298 	push	hl
   016A CDr00r00      [17]  299 	call	_devkit_SMS_addSprite
   016D F1            [10]  300 	pop	af
                            301 ;screen_manager.c:79: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   016E 21 42 01      [10]  302 	ld	hl, #0x0142
   0171 E3            [19]  303 	ex	(sp),hl
   0172 21 B0 28      [10]  304 	ld	hl, #0x28b0
   0175 E5            [11]  305 	push	hl
   0176 CDr00r00      [17]  306 	call	_devkit_SMS_addSprite
   0179 F1            [10]  307 	pop	af
                            308 ;screen_manager.c:80: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   017A 21 43 01      [10]  309 	ld	hl, #0x0143
   017D E3            [19]  310 	ex	(sp),hl
   017E 21 B8 28      [10]  311 	ld	hl, #0x28b8
   0181 E5            [11]  312 	push	hl
   0182 CDr00r00      [17]  313 	call	_devkit_SMS_addSprite
   0185 F1            [10]  314 	pop	af
                            315 ;screen_manager.c:83: devkit_SMS_addSprite( x + 0, y + 40, tile + 0 );
   0186 21 44 01      [10]  316 	ld	hl, #0x0144
   0189 E3            [19]  317 	ex	(sp),hl
   018A 21 B0 48      [10]  318 	ld	hl, #0x48b0
   018D E5            [11]  319 	push	hl
   018E CDr00r00      [17]  320 	call	_devkit_SMS_addSprite
   0191 F1            [10]  321 	pop	af
                            322 ;screen_manager.c:84: devkit_SMS_addSprite( x + 8, y + 40, tile + 1 );
   0192 21 45 01      [10]  323 	ld	hl, #0x0145
   0195 E3            [19]  324 	ex	(sp),hl
   0196 21 B8 48      [10]  325 	ld	hl, #0x48b8
   0199 E5            [11]  326 	push	hl
   019A CDr00r00      [17]  327 	call	_devkit_SMS_addSprite
   019D F1            [10]  328 	pop	af
                            329 ;screen_manager.c:85: devkit_SMS_addSprite( x + 0, y + 48, tile + 2 );
   019E 21 46 01      [10]  330 	ld	hl, #0x0146
   01A1 E3            [19]  331 	ex	(sp),hl
   01A2 21 B0 50      [10]  332 	ld	hl, #0x50b0
   01A5 E5            [11]  333 	push	hl
   01A6 CDr00r00      [17]  334 	call	_devkit_SMS_addSprite
   01A9 F1            [10]  335 	pop	af
                            336 ;screen_manager.c:86: devkit_SMS_addSprite( x + 8, y + 48, tile + 3 );
   01AA 21 47 01      [10]  337 	ld	hl, #0x0147
   01AD E3            [19]  338 	ex	(sp),hl
   01AE 21 B8 50      [10]  339 	ld	hl, #0x50b8
   01B1 E5            [11]  340 	push	hl
   01B2 CDr00r00      [17]  341 	call	_devkit_SMS_addSprite
   01B5 F1            [10]  342 	pop	af
   01B6 F1            [10]  343 	pop	af
   01B7 C9            [10]  344 	ret
                            345 	.area _CODE
                            346 	.area _INITIALIZER
                            347 	.area _CABS (ABS)
