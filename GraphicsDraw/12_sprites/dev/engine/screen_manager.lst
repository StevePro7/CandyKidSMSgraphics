                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _engine_input_manager_move_fire1
                             13 	.globl _engine_font_manager_draw_text
                             14 	.globl _engine_screen_manager_init
                             15 	.globl _engine_screen_manager_update
                             16 ;--------------------------------------------------------
                             17 ; special function registers
                             18 ;--------------------------------------------------------
                             19 ;--------------------------------------------------------
                             20 ; ram data
                             21 ;--------------------------------------------------------
                             22 	.area _DATA
                             23 ;--------------------------------------------------------
                             24 ; ram data
                             25 ;--------------------------------------------------------
                             26 	.area _INITIALIZED
                             27 ;--------------------------------------------------------
                             28 ; absolute external ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DABS (ABS)
                             31 ;--------------------------------------------------------
                             32 ; global & static initialisations
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _GSINIT
                             36 	.area _GSFINAL
                             37 	.area _GSINIT
                             38 ;--------------------------------------------------------
                             39 ; Home
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _HOME
                             43 ;--------------------------------------------------------
                             44 ; code
                             45 ;--------------------------------------------------------
                             46 	.area _CODE
                             47 ;screen_manager.c:13: void engine_screen_manager_init()
                             48 ;	---------------------------------
                             49 ; Function engine_screen_manager_init
                             50 ; ---------------------------------
   0000                      51 _engine_screen_manager_init::
                             52 ;screen_manager.c:15: engine_font_manager_draw_text( SPRITE_TILES_TEXT, 2, 0 );
   0000 21 02 00      [10]   53 	ld	hl, #0x0002
   0003 E5            [11]   54 	push	hl
   0004 21r0Er00      [10]   55 	ld	hl, #___str_0
   0007 E5            [11]   56 	push	hl
   0008 CDr00r00      [17]   57 	call	_engine_font_manager_draw_text
   000B F1            [10]   58 	pop	af
   000C F1            [10]   59 	pop	af
   000D C9            [10]   60 	ret
   000E                      61 ___str_0:
   000E 53 50 52 49 54 45    62 	.ascii "SPRITE TILES LOADED..."
        20 54 49 4C 45 53
        20 4C 4F 41 44 45
        44 2E 2E 2E
   0024 00                   63 	.db 0x00
                             64 ;screen_manager.c:18: void engine_screen_manager_update()
                             65 ;	---------------------------------
                             66 ; Function engine_screen_manager_update
                             67 ; ---------------------------------
   0025                      68 _engine_screen_manager_update::
                             69 ;screen_manager.c:22: input = engine_input_manager_move_fire1();
   0025 CDr00r00      [17]   70 	call	_engine_input_manager_move_fire1
                             71 ;screen_manager.c:23: if( input )
   0028 7D            [ 4]   72 	ld	a, l
   0029 B7            [ 4]   73 	or	a, a
                             74 ;screen_manager.c:25: draw_skullnc();
   002A C2rC5r00      [10]   75 	jp	NZ,_draw_skullnc
                             76 ;screen_manager.c:29: draw_candykd();
   002D C3r93r00      [10]   77 	jp  _draw_candykd
                             78 ;screen_manager.c:33: static void draw_sprites( unsigned char x, unsigned char y, unsigned char idx)
                             79 ;	---------------------------------
                             80 ; Function draw_sprites
                             81 ; ---------------------------------
   0030                      82 _draw_sprites:
   0030 DD E5         [15]   83 	push	ix
   0032 DD 21 00 00   [14]   84 	ld	ix,#0
   0036 DD 39         [15]   85 	add	ix,sp
                             86 ;screen_manager.c:35: unsigned int tile = 256 + idx * 4;
   0038 DD 6E 06      [19]   87 	ld	l, 6 (ix)
   003B 26 00         [ 7]   88 	ld	h, #0x00
   003D 29            [11]   89 	add	hl, hl
   003E 29            [11]   90 	add	hl, hl
   003F 01 00 01      [10]   91 	ld	bc,#0x0100
   0042 09            [11]   92 	add	hl,bc
   0043 4D            [ 4]   93 	ld	c, l
   0044 44            [ 4]   94 	ld	b, h
                             95 ;screen_manager.c:37: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   0045 C5            [11]   96 	push	bc
   0046 C5            [11]   97 	push	bc
   0047 DD 66 05      [19]   98 	ld	h, 5 (ix)
   004A DD 6E 04      [19]   99 	ld	l, 4 (ix)
   004D E5            [11]  100 	push	hl
   004E CDr00r00      [17]  101 	call	_devkit_SMS_addSprite
   0051 F1            [10]  102 	pop	af
   0052 F1            [10]  103 	pop	af
   0053 C1            [10]  104 	pop	bc
                            105 ;screen_manager.c:38: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   0054 69            [ 4]  106 	ld	l, c
   0055 60            [ 4]  107 	ld	h, b
   0056 23            [ 6]  108 	inc	hl
   0057 DD 7E 04      [19]  109 	ld	a, 4 (ix)
   005A C6 08         [ 7]  110 	add	a, #0x08
   005C 5F            [ 4]  111 	ld	e, a
   005D C5            [11]  112 	push	bc
   005E D5            [11]  113 	push	de
   005F E5            [11]  114 	push	hl
   0060 DD 56 05      [19]  115 	ld	d, 5 (ix)
   0063 D5            [11]  116 	push	de
   0064 CDr00r00      [17]  117 	call	_devkit_SMS_addSprite
   0067 F1            [10]  118 	pop	af
   0068 F1            [10]  119 	pop	af
   0069 D1            [10]  120 	pop	de
   006A C1            [10]  121 	pop	bc
                            122 ;screen_manager.c:39: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   006B 69            [ 4]  123 	ld	l, c
   006C 60            [ 4]  124 	ld	h, b
   006D 23            [ 6]  125 	inc	hl
   006E 23            [ 6]  126 	inc	hl
   006F DD 7E 05      [19]  127 	ld	a, 5 (ix)
   0072 C6 08         [ 7]  128 	add	a, #0x08
   0074 57            [ 4]  129 	ld	d, a
   0075 C5            [11]  130 	push	bc
   0076 D5            [11]  131 	push	de
   0077 E5            [11]  132 	push	hl
   0078 D5            [11]  133 	push	de
   0079 33            [ 6]  134 	inc	sp
   007A DD 7E 04      [19]  135 	ld	a, 4 (ix)
   007D F5            [11]  136 	push	af
   007E 33            [ 6]  137 	inc	sp
   007F CDr00r00      [17]  138 	call	_devkit_SMS_addSprite
   0082 F1            [10]  139 	pop	af
   0083 F1            [10]  140 	pop	af
   0084 D1            [10]  141 	pop	de
   0085 C1            [10]  142 	pop	bc
                            143 ;screen_manager.c:40: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   0086 03            [ 6]  144 	inc	bc
   0087 03            [ 6]  145 	inc	bc
   0088 03            [ 6]  146 	inc	bc
   0089 C5            [11]  147 	push	bc
   008A D5            [11]  148 	push	de
   008B CDr00r00      [17]  149 	call	_devkit_SMS_addSprite
   008E F1            [10]  150 	pop	af
   008F F1            [10]  151 	pop	af
   0090 DD E1         [14]  152 	pop	ix
   0092 C9            [10]  153 	ret
                            154 ;screen_manager.c:42: static void draw_candykd()
                            155 ;	---------------------------------
                            156 ; Function draw_candykd
                            157 ; ---------------------------------
   0093                     158 _draw_candykd:
                            159 ;screen_manager.c:48: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   0093 21 30 01      [10]  160 	ld	hl, #0x0130
   0096 E5            [11]  161 	push	hl
   0097 21 B0 20      [10]  162 	ld	hl, #0x20b0
   009A E5            [11]  163 	push	hl
   009B CDr00r00      [17]  164 	call	_devkit_SMS_addSprite
   009E F1            [10]  165 	pop	af
                            166 ;screen_manager.c:49: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   009F 21 31 01      [10]  167 	ld	hl, #0x0131
   00A2 E3            [19]  168 	ex	(sp),hl
   00A3 21 B8 20      [10]  169 	ld	hl, #0x20b8
   00A6 E5            [11]  170 	push	hl
   00A7 CDr00r00      [17]  171 	call	_devkit_SMS_addSprite
   00AA F1            [10]  172 	pop	af
                            173 ;screen_manager.c:50: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   00AB 21 32 01      [10]  174 	ld	hl, #0x0132
   00AE E3            [19]  175 	ex	(sp),hl
   00AF 21 B0 28      [10]  176 	ld	hl, #0x28b0
   00B2 E5            [11]  177 	push	hl
   00B3 CDr00r00      [17]  178 	call	_devkit_SMS_addSprite
   00B6 F1            [10]  179 	pop	af
                            180 ;screen_manager.c:51: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   00B7 21 33 01      [10]  181 	ld	hl, #0x0133
   00BA E3            [19]  182 	ex	(sp),hl
   00BB 21 B8 28      [10]  183 	ld	hl, #0x28b8
   00BE E5            [11]  184 	push	hl
   00BF CDr00r00      [17]  185 	call	_devkit_SMS_addSprite
   00C2 F1            [10]  186 	pop	af
   00C3 F1            [10]  187 	pop	af
   00C4 C9            [10]  188 	ret
                            189 ;screen_manager.c:53: static void draw_skullnc()
                            190 ;	---------------------------------
                            191 ; Function draw_skullnc
                            192 ; ---------------------------------
   00C5                     193 _draw_skullnc:
                            194 ;screen_manager.c:59: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   00C5 21 40 01      [10]  195 	ld	hl, #0x0140
   00C8 E5            [11]  196 	push	hl
   00C9 21 B0 20      [10]  197 	ld	hl, #0x20b0
   00CC E5            [11]  198 	push	hl
   00CD CDr00r00      [17]  199 	call	_devkit_SMS_addSprite
   00D0 F1            [10]  200 	pop	af
                            201 ;screen_manager.c:60: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   00D1 21 41 01      [10]  202 	ld	hl, #0x0141
   00D4 E3            [19]  203 	ex	(sp),hl
   00D5 21 B8 20      [10]  204 	ld	hl, #0x20b8
   00D8 E5            [11]  205 	push	hl
   00D9 CDr00r00      [17]  206 	call	_devkit_SMS_addSprite
   00DC F1            [10]  207 	pop	af
                            208 ;screen_manager.c:61: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   00DD 21 42 01      [10]  209 	ld	hl, #0x0142
   00E0 E3            [19]  210 	ex	(sp),hl
   00E1 21 B0 28      [10]  211 	ld	hl, #0x28b0
   00E4 E5            [11]  212 	push	hl
   00E5 CDr00r00      [17]  213 	call	_devkit_SMS_addSprite
   00E8 F1            [10]  214 	pop	af
                            215 ;screen_manager.c:62: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   00E9 21 43 01      [10]  216 	ld	hl, #0x0143
   00EC E3            [19]  217 	ex	(sp),hl
   00ED 21 B8 28      [10]  218 	ld	hl, #0x28b8
   00F0 E5            [11]  219 	push	hl
   00F1 CDr00r00      [17]  220 	call	_devkit_SMS_addSprite
   00F4 F1            [10]  221 	pop	af
   00F5 F1            [10]  222 	pop	af
   00F6 C9            [10]  223 	ret
                            224 	.area _CODE
                            225 	.area _INITIALIZER
                            226 	.area _CABS (ABS)
