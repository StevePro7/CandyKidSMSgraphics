                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _engine_font_manager_draw_text
                             13 	.globl _engine_screen_manager_init
                             14 	.globl _engine_screen_manager_update
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;screen_manager.c:11: void engine_screen_manager_init()
                             47 ;	---------------------------------
                             48 ; Function engine_screen_manager_init
                             49 ; ---------------------------------
   0000                      50 _engine_screen_manager_init::
                             51 ;screen_manager.c:13: engine_font_manager_draw_text( SPRITE_TILES_TEXT, 2, 0 );
   0000 21 02 00      [10]   52 	ld	hl, #0x0002
   0003 E5            [11]   53 	push	hl
   0004 21r0Er00      [10]   54 	ld	hl, #___str_0
   0007 E5            [11]   55 	push	hl
   0008 CDr00r00      [17]   56 	call	_engine_font_manager_draw_text
   000B F1            [10]   57 	pop	af
   000C F1            [10]   58 	pop	af
   000D C9            [10]   59 	ret
   000E                      60 ___str_0:
   000E 53 50 52 49 54 45    61 	.ascii "SPRITE TILES LOADED..."
        20 54 49 4C 45 53
        20 4C 4F 41 44 45
        44 2E 2E 2E
   0024 00                   62 	.db 0x00
                             63 ;screen_manager.c:16: void engine_screen_manager_update()
                             64 ;	---------------------------------
                             65 ; Function engine_screen_manager_update
                             66 ; ---------------------------------
   0025                      67 _engine_screen_manager_update::
                             68 ;screen_manager.c:18: draw_sprites();
   0025 CDr2Br00      [17]   69 	call	_draw_sprites
                             70 ;screen_manager.c:19: draw_adriana();
   0028 C3rCDr00      [10]   71 	jp  _draw_adriana
                             72 ;screen_manager.c:22: static void draw_sprites()
                             73 ;	---------------------------------
                             74 ; Function draw_sprites
                             75 ; ---------------------------------
   002B                      76 _draw_sprites:
   002B DD E5         [15]   77 	push	ix
   002D DD 21 00 00   [14]   78 	ld	ix,#0
   0031 DD 39         [15]   79 	add	ix,sp
   0033 F5            [11]   80 	push	af
   0034 3B            [ 6]   81 	dec	sp
                             82 ;screen_manager.c:32: c = 2; 	devkit_SMS_addSprite( x + c * max, y + r * max, tile + ( r * max + c ) );
   0035 21 02 01      [10]   83 	ld	hl, #0x0102
   0038 E5            [11]   84 	push	hl
   0039 21 50 20      [10]   85 	ld	hl, #0x2050
   003C E5            [11]   86 	push	hl
   003D CDr00r00      [17]   87 	call	_devkit_SMS_addSprite
   0040 F1            [10]   88 	pop	af
                             89 ;screen_manager.c:33: c = 3; 	devkit_SMS_addSprite( x + c * max, y + r * max, tile + ( r * max + c ) );
   0041 21 03 01      [10]   90 	ld	hl, #0x0103
   0044 E3            [19]   91 	ex	(sp),hl
   0045 21 58 20      [10]   92 	ld	hl, #0x2058
   0048 E5            [11]   93 	push	hl
   0049 CDr00r00      [17]   94 	call	_devkit_SMS_addSprite
   004C F1            [10]   95 	pop	af
                             96 ;screen_manager.c:34: c = 4; 	devkit_SMS_addSprite( x + c * max, y + r * max, tile + ( r * max + c ) );
   004D 21 04 01      [10]   97 	ld	hl, #0x0104
   0050 E3            [19]   98 	ex	(sp),hl
   0051 21 60 20      [10]   99 	ld	hl, #0x2060
   0054 E5            [11]  100 	push	hl
   0055 CDr00r00      [17]  101 	call	_devkit_SMS_addSprite
   0058 F1            [10]  102 	pop	af
                            103 ;screen_manager.c:35: c = 5; 	devkit_SMS_addSprite( x + c * max, y + r * max, tile + ( r * max + c ) );
   0059 21 05 01      [10]  104 	ld	hl, #0x0105
   005C E3            [19]  105 	ex	(sp),hl
   005D 21 68 20      [10]  106 	ld	hl, #0x2068
   0060 E5            [11]  107 	push	hl
   0061 CDr00r00      [17]  108 	call	_devkit_SMS_addSprite
   0064 F1            [10]  109 	pop	af
   0065 F1            [10]  110 	pop	af
                            111 ;screen_manager.c:37: for( r = 1; r < max - 0; r++ )
   0066 0E 01         [ 7]  112 	ld	c, #0x01
   0068                     113 00107$:
   0068 79            [ 4]  114 	ld	a, c
   0069 1E 00         [ 7]  115 	ld	e, #0x00
   006B D6 08         [ 7]  116 	sub	a, #0x08
   006D 7B            [ 4]  117 	ld	a, e
   006E 17            [ 4]  118 	rla
   006F 3F            [ 4]  119 	ccf
   0070 1F            [ 4]  120 	rra
   0071 DE 80         [ 7]  121 	sbc	a, #0x80
   0073 30 53         [12]  122 	jr	NC,00109$
                            123 ;screen_manager.c:39: for( c = 1; c < max - 1; c++ )
   0075 69            [ 4]  124 	ld	l, c
   0076 26 00         [ 7]  125 	ld	h, #0x00
   0078 29            [11]  126 	add	hl, hl
   0079 29            [11]  127 	add	hl, hl
   007A 29            [11]  128 	add	hl, hl
   007B DD 75 FE      [19]  129 	ld	-2 (ix), l
   007E DD 74 FF      [19]  130 	ld	-1 (ix), h
   0081 79            [ 4]  131 	ld	a, c
   0082 87            [ 4]  132 	add	a, a
   0083 87            [ 4]  133 	add	a, a
   0084 87            [ 4]  134 	add	a, a
   0085 C6 20         [ 7]  135 	add	a, #0x20
   0087 DD 77 FD      [19]  136 	ld	-3 (ix), a
   008A 06 01         [ 7]  137 	ld	b, #0x01
   008C                     138 00104$:
   008C 58            [ 4]  139 	ld	e, b
   008D 16 00         [ 7]  140 	ld	d, #0x00
   008F 7B            [ 4]  141 	ld	a, e
   0090 D6 07         [ 7]  142 	sub	a, #0x07
   0092 7A            [ 4]  143 	ld	a, d
   0093 17            [ 4]  144 	rla
   0094 3F            [ 4]  145 	ccf
   0095 1F            [ 4]  146 	rra
   0096 DE 80         [ 7]  147 	sbc	a, #0x80
   0098 30 2B         [12]  148 	jr	NC,00108$
                            149 ;screen_manager.c:41: devkit_SMS_addSprite( x + c * max, y + r * max, tile + ( r * max + c ) );
   009A DD 6E FE      [19]  150 	ld	l,-2 (ix)
   009D DD 66 FF      [19]  151 	ld	h,-1 (ix)
   00A0 19            [11]  152 	add	hl, de
   00A1 5D            [ 4]  153 	ld	e, l
   00A2 54            [ 4]  154 	ld	d, h
   00A3 FD 21 00 01   [14]  155 	ld	iy, #0x0100
   00A7 FD 19         [15]  156 	add	iy, de
   00A9 68            [ 4]  157 	ld	l, b
   00AA 5D            [ 4]  158 	ld	e, l
   00AB 29            [11]  159 	add	hl, hl
   00AC 29            [11]  160 	add	hl, hl
   00AD 29            [11]  161 	add	hl, hl
   00AE 7D            [ 4]  162 	ld	a, l
   00AF C6 40         [ 7]  163 	add	a, #0x40
   00B1 57            [ 4]  164 	ld	d, a
   00B2 C5            [11]  165 	push	bc
   00B3 FD E5         [15]  166 	push	iy
   00B5 DD 7E FD      [19]  167 	ld	a, -3 (ix)
   00B8 F5            [11]  168 	push	af
   00B9 33            [ 6]  169 	inc	sp
   00BA D5            [11]  170 	push	de
   00BB 33            [ 6]  171 	inc	sp
   00BC CDr00r00      [17]  172 	call	_devkit_SMS_addSprite
   00BF F1            [10]  173 	pop	af
   00C0 F1            [10]  174 	pop	af
   00C1 C1            [10]  175 	pop	bc
                            176 ;screen_manager.c:39: for( c = 1; c < max - 1; c++ )
   00C2 04            [ 4]  177 	inc	b
   00C3 18 C7         [12]  178 	jr	00104$
   00C5                     179 00108$:
                            180 ;screen_manager.c:37: for( r = 1; r < max - 0; r++ )
   00C5 0C            [ 4]  181 	inc	c
   00C6 18 A0         [12]  182 	jr	00107$
   00C8                     183 00109$:
   00C8 DD F9         [10]  184 	ld	sp, ix
   00CA DD E1         [14]  185 	pop	ix
   00CC C9            [10]  186 	ret
                            187 ;screen_manager.c:45: static void draw_adriana()
                            188 ;	---------------------------------
                            189 ; Function draw_adriana
                            190 ; ---------------------------------
   00CD                     191 _draw_adriana:
                            192 ;screen_manager.c:51: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   00CD 21 40 01      [10]  193 	ld	hl, #0x0140
   00D0 E5            [11]  194 	push	hl
   00D1 21 B0 20      [10]  195 	ld	hl, #0x20b0
   00D4 E5            [11]  196 	push	hl
   00D5 CDr00r00      [17]  197 	call	_devkit_SMS_addSprite
   00D8 F1            [10]  198 	pop	af
                            199 ;screen_manager.c:52: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   00D9 21 41 01      [10]  200 	ld	hl, #0x0141
   00DC E3            [19]  201 	ex	(sp),hl
   00DD 21 B8 20      [10]  202 	ld	hl, #0x20b8
   00E0 E5            [11]  203 	push	hl
   00E1 CDr00r00      [17]  204 	call	_devkit_SMS_addSprite
   00E4 F1            [10]  205 	pop	af
                            206 ;screen_manager.c:53: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   00E5 21 42 01      [10]  207 	ld	hl, #0x0142
   00E8 E3            [19]  208 	ex	(sp),hl
   00E9 21 B0 28      [10]  209 	ld	hl, #0x28b0
   00EC E5            [11]  210 	push	hl
   00ED CDr00r00      [17]  211 	call	_devkit_SMS_addSprite
   00F0 F1            [10]  212 	pop	af
                            213 ;screen_manager.c:54: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   00F1 21 43 01      [10]  214 	ld	hl, #0x0143
   00F4 E3            [19]  215 	ex	(sp),hl
   00F5 21 B8 28      [10]  216 	ld	hl, #0x28b8
   00F8 E5            [11]  217 	push	hl
   00F9 CDr00r00      [17]  218 	call	_devkit_SMS_addSprite
   00FC F1            [10]  219 	pop	af
   00FD F1            [10]  220 	pop	af
   00FE C9            [10]  221 	ret
                            222 	.area _CODE
                            223 	.area _INITIALIZER
                            224 	.area _CABS (ABS)
