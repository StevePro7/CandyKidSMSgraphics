                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _engine_font_manager_draw_text
                             13 	.globl _engine_screen_manager_init
                             14 	.globl _engine_screen_manager_update
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;screen_manager.c:11: void engine_screen_manager_init()
                             47 ;	---------------------------------
                             48 ; Function engine_screen_manager_init
                             49 ; ---------------------------------
   0000                      50 _engine_screen_manager_init::
                             51 ;screen_manager.c:13: engine_font_manager_draw_text( SPRITE_TILES_TEXT, 2, 0 );
   0000 21 02 00      [10]   52 	ld	hl, #0x0002
   0003 E5            [11]   53 	push	hl
   0004 21r0Er00      [10]   54 	ld	hl, #___str_0
   0007 E5            [11]   55 	push	hl
   0008 CDr00r00      [17]   56 	call	_engine_font_manager_draw_text
   000B F1            [10]   57 	pop	af
   000C F1            [10]   58 	pop	af
   000D C9            [10]   59 	ret
   000E                      60 ___str_0:
   000E 53 50 52 49 54 45    61 	.ascii "SPRITE TILES LOADED..."
        20 54 49 4C 45 53
        20 4C 4F 41 44 45
        44 2E 2E 2E
   0024 00                   62 	.db 0x00
                             63 ;screen_manager.c:16: void engine_screen_manager_update()
                             64 ;	---------------------------------
                             65 ; Function engine_screen_manager_update
                             66 ; ---------------------------------
   0025                      67 _engine_screen_manager_update::
                             68 ;screen_manager.c:18: draw_sprites();
   0025 CDr2Br00      [17]   69 	call	_draw_sprites
                             70 ;screen_manager.c:19: draw_adriana();
   0028 C3r92r00      [10]   71 	jp  _draw_adriana
                             72 ;screen_manager.c:22: static void draw_sprites()
                             73 ;	---------------------------------
                             74 ; Function draw_sprites
                             75 ; ---------------------------------
   002B                      76 _draw_sprites:
   002B DD E5         [15]   77 	push	ix
   002D DD 21 00 00   [14]   78 	ld	ix,#0
   0031 DD 39         [15]   79 	add	ix,sp
   0033 F5            [11]   80 	push	af
                             81 ;screen_manager.c:32: for( r = 0; r < max - 2; r++ )
   0034 0E 00         [ 7]   82 	ld	c, #0x00
   0036                      83 00107$:
   0036 79            [ 4]   84 	ld	a, c
   0037 1E 00         [ 7]   85 	ld	e, #0x00
   0039 D6 06         [ 7]   86 	sub	a, #0x06
   003B 7B            [ 4]   87 	ld	a, e
   003C 17            [ 4]   88 	rla
   003D 3F            [ 4]   89 	ccf
   003E 1F            [ 4]   90 	rra
   003F DE 80         [ 7]   91 	sbc	a, #0x80
   0041 30 4A         [12]   92 	jr	NC,00109$
                             93 ;screen_manager.c:34: for( c = 0; c < max; c++ )
   0043 69            [ 4]   94 	ld	l, c
   0044 26 00         [ 7]   95 	ld	h, #0x00
   0046 29            [11]   96 	add	hl, hl
   0047 29            [11]   97 	add	hl, hl
   0048 29            [11]   98 	add	hl, hl
   0049 E3            [19]   99 	ex	(sp), hl
   004A 69            [ 4]  100 	ld	l, c
   004B 29            [11]  101 	add	hl, hl
   004C 29            [11]  102 	add	hl, hl
   004D 29            [11]  103 	add	hl, hl
   004E 7D            [ 4]  104 	ld	a, l
   004F C6 20         [ 7]  105 	add	a, #0x20
   0051 47            [ 4]  106 	ld	b, a
   0052 1E 00         [ 7]  107 	ld	e, #0x00
   0054                     108 00104$:
   0054 7B            [ 4]  109 	ld	a, e
   0055 D6 08         [ 7]  110 	sub	a, #0x08
   0057 30 31         [12]  111 	jr	NC,00108$
                            112 ;screen_manager.c:36: devkit_SMS_addSprite( x + c * max, y + r * max, tile + ( r * max + c ) );
   0059 53            [ 4]  113 	ld	d, e
   005A 26 00         [ 7]  114 	ld	h, #0x00
   005C DD 7E FE      [19]  115 	ld	a, -2 (ix)
   005F 82            [ 4]  116 	add	a, d
   0060 6F            [ 4]  117 	ld	l, a
   0061 DD 7E FF      [19]  118 	ld	a, -1 (ix)
   0064 8C            [ 4]  119 	adc	a, h
   0065 67            [ 4]  120 	ld	h, a
   0066 FD 21 00 01   [14]  121 	ld	iy, #0x0100
   006A C5            [11]  122 	push	bc
   006B 4D            [ 4]  123 	ld	c, l
   006C 44            [ 4]  124 	ld	b, h
   006D FD 09         [15]  125 	add	iy, bc
   006F C1            [10]  126 	pop	bc
   0070 D5            [11]  127 	push	de
   0071 6B            [ 4]  128 	ld	l, e
   0072 29            [11]  129 	add	hl, hl
   0073 29            [11]  130 	add	hl, hl
   0074 29            [11]  131 	add	hl, hl
   0075 D1            [10]  132 	pop	de
   0076 7D            [ 4]  133 	ld	a, l
   0077 C6 40         [ 7]  134 	add	a, #0x40
   0079 57            [ 4]  135 	ld	d, a
   007A C5            [11]  136 	push	bc
   007B D5            [11]  137 	push	de
   007C FD E5         [15]  138 	push	iy
   007E 4A            [ 4]  139 	ld	c, d
   007F C5            [11]  140 	push	bc
   0080 CDr00r00      [17]  141 	call	_devkit_SMS_addSprite
   0083 F1            [10]  142 	pop	af
   0084 F1            [10]  143 	pop	af
   0085 D1            [10]  144 	pop	de
   0086 C1            [10]  145 	pop	bc
                            146 ;screen_manager.c:34: for( c = 0; c < max; c++ )
   0087 1C            [ 4]  147 	inc	e
   0088 18 CA         [12]  148 	jr	00104$
   008A                     149 00108$:
                            150 ;screen_manager.c:32: for( r = 0; r < max - 2; r++ )
   008A 0C            [ 4]  151 	inc	c
   008B 18 A9         [12]  152 	jr	00107$
   008D                     153 00109$:
   008D DD F9         [10]  154 	ld	sp, ix
   008F DD E1         [14]  155 	pop	ix
   0091 C9            [10]  156 	ret
                            157 ;screen_manager.c:40: static void draw_adriana()
                            158 ;	---------------------------------
                            159 ; Function draw_adriana
                            160 ; ---------------------------------
   0092                     161 _draw_adriana:
                            162 ;screen_manager.c:46: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   0092 21 40 01      [10]  163 	ld	hl, #0x0140
   0095 E5            [11]  164 	push	hl
   0096 26 A0         [ 7]  165 	ld	h, #0xa0
   0098 E5            [11]  166 	push	hl
   0099 CDr00r00      [17]  167 	call	_devkit_SMS_addSprite
   009C F1            [10]  168 	pop	af
                            169 ;screen_manager.c:47: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   009D 21 41 01      [10]  170 	ld	hl, #0x0141
   00A0 E3            [19]  171 	ex	(sp),hl
   00A1 21 48 A0      [10]  172 	ld	hl, #0xa048
   00A4 E5            [11]  173 	push	hl
   00A5 CDr00r00      [17]  174 	call	_devkit_SMS_addSprite
   00A8 F1            [10]  175 	pop	af
                            176 ;screen_manager.c:48: devkit_SMS_addSprite( x + 0, y + 8, tile + 2 );
   00A9 21 42 01      [10]  177 	ld	hl, #0x0142
   00AC E3            [19]  178 	ex	(sp),hl
   00AD 21 40 A8      [10]  179 	ld	hl, #0xa840
   00B0 E5            [11]  180 	push	hl
   00B1 CDr00r00      [17]  181 	call	_devkit_SMS_addSprite
   00B4 F1            [10]  182 	pop	af
                            183 ;screen_manager.c:49: devkit_SMS_addSprite( x + 8, y + 8, tile + 3 );
   00B5 21 43 01      [10]  184 	ld	hl, #0x0143
   00B8 E3            [19]  185 	ex	(sp),hl
   00B9 21 48 A8      [10]  186 	ld	hl, #0xa848
   00BC E5            [11]  187 	push	hl
   00BD CDr00r00      [17]  188 	call	_devkit_SMS_addSprite
   00C0 F1            [10]  189 	pop	af
   00C1 F1            [10]  190 	pop	af
   00C2 C9            [10]  191 	ret
                            192 	.area _CODE
                            193 	.area _INITIALIZER
                            194 	.area _CABS (ABS)
