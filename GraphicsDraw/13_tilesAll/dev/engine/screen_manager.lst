                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_setTile
                             12 	.globl _devkit_SMS_setNextTileatXY
                             13 	.globl _engine_screen_manager_init
                             14 	.globl _engine_screen_manager_update
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;screen_manager.c:16: void engine_screen_manager_init()
                             47 ;	---------------------------------
                             48 ; Function engine_screen_manager_init
                             49 ; ---------------------------------
   0000                      50 _engine_screen_manager_init::
                             51 ;screen_manager.c:22: for( x = 2; x < 32; x += 2 )
   0000 06 02         [ 7]   52 	ld	b, #0x02
   0002                      53 00103$:
                             54 ;screen_manager.c:24: draw_tiles( x, 0, 0 );
   0002 C5            [11]   55 	push	bc
   0003 21 00 00      [10]   56 	ld	hl, #0x0000
   0006 E5            [11]   57 	push	hl
   0007 C5            [11]   58 	push	bc
   0008 33            [ 6]   59 	inc	sp
   0009 CDrAEr00      [17]   60 	call	_draw_tiles
   000C F1            [10]   61 	pop	af
   000D 33            [ 6]   62 	inc	sp
   000E C1            [10]   63 	pop	bc
                             64 ;screen_manager.c:25: draw_tiles( x, 22, 0 );
   000F C5            [11]   65 	push	bc
   0010 21 16 00      [10]   66 	ld	hl, #0x0016
   0013 E5            [11]   67 	push	hl
   0014 C5            [11]   68 	push	bc
   0015 33            [ 6]   69 	inc	sp
   0016 CDrAEr00      [17]   70 	call	_draw_tiles
   0019 F1            [10]   71 	pop	af
   001A 33            [ 6]   72 	inc	sp
   001B C1            [10]   73 	pop	bc
                             74 ;screen_manager.c:22: for( x = 2; x < 32; x += 2 )
   001C 04            [ 4]   75 	inc	b
   001D 04            [ 4]   76 	inc	b
   001E 78            [ 4]   77 	ld	a, b
   001F D6 20         [ 7]   78 	sub	a, #0x20
   0021 38 DF         [12]   79 	jr	C,00103$
                             80 ;screen_manager.c:27: for( y = 2; y < 22; y += 2 )
   0023 06 02         [ 7]   81 	ld	b, #0x02
   0025                      82 00105$:
                             83 ;screen_manager.c:29: draw_tiles( 2, y, 0 );
   0025 C5            [11]   84 	push	bc
   0026 AF            [ 4]   85 	xor	a, a
   0027 F5            [11]   86 	push	af
   0028 33            [ 6]   87 	inc	sp
   0029 C5            [11]   88 	push	bc
   002A 33            [ 6]   89 	inc	sp
   002B 3E 02         [ 7]   90 	ld	a, #0x02
   002D F5            [11]   91 	push	af
   002E 33            [ 6]   92 	inc	sp
   002F CDrAEr00      [17]   93 	call	_draw_tiles
   0032 F1            [10]   94 	pop	af
   0033 33            [ 6]   95 	inc	sp
   0034 C1            [10]   96 	pop	bc
                             97 ;screen_manager.c:30: draw_tiles( 30, y, 0 );
   0035 C5            [11]   98 	push	bc
   0036 AF            [ 4]   99 	xor	a, a
   0037 F5            [11]  100 	push	af
   0038 33            [ 6]  101 	inc	sp
   0039 C5            [11]  102 	push	bc
   003A 33            [ 6]  103 	inc	sp
   003B 3E 1E         [ 7]  104 	ld	a, #0x1e
   003D F5            [11]  105 	push	af
   003E 33            [ 6]  106 	inc	sp
   003F CDrAEr00      [17]  107 	call	_draw_tiles
   0042 F1            [10]  108 	pop	af
   0043 33            [ 6]  109 	inc	sp
   0044 C1            [10]  110 	pop	bc
                            111 ;screen_manager.c:27: for( y = 2; y < 22; y += 2 )
   0045 04            [ 4]  112 	inc	b
   0046 04            [ 4]  113 	inc	b
   0047 78            [ 4]  114 	ld	a, b
   0048 D6 16         [ 7]  115 	sub	a, #0x16
   004A 38 D9         [12]  116 	jr	C,00105$
                            117 ;screen_manager.c:57: draw_title();
   004C C3r50r00      [10]  118 	jp  _draw_title
                            119 ;screen_manager.c:62: void engine_screen_manager_update()
                            120 ;	---------------------------------
                            121 ; Function engine_screen_manager_update
                            122 ; ---------------------------------
   004F                     123 _engine_screen_manager_update::
                            124 ;screen_manager.c:86: }
   004F C9            [10]  125 	ret
                            126 ;screen_manager.c:88: static void draw_title()
                            127 ;	---------------------------------
                            128 ; Function draw_title
                            129 ; ---------------------------------
   0050                     130 _draw_title:
   0050 DD E5         [15]  131 	push	ix
   0052 DD 21 00 00   [14]  132 	ld	ix,#0
   0056 DD 39         [15]  133 	add	ix,sp
   0058 F5            [11]  134 	push	af
                            135 ;screen_manager.c:91: const unsigned int *pnt = ( const unsigned int * ) apex_tiles__tilemap__bin;
   0059 11r00r00      [10]  136 	ld	de, #_apex_tiles__tilemap__bin+0
                            137 ;screen_manager.c:103: for( j = 0; j < 4; j++ )
   005C 0E 00         [ 7]  138 	ld	c, #0x00
                            139 ;screen_manager.c:105: for( i = 0; i < w; i++ )
   005E                     140 00111$:
   005E 41            [ 4]  141 	ld	b, c
   005F 04            [ 4]  142 	inc	b
   0060 04            [ 4]  143 	inc	b
   0061 79            [ 4]  144 	ld	a, c
   0062 87            [ 4]  145 	add	a, a
   0063 81            [ 4]  146 	add	a, c
   0064 87            [ 4]  147 	add	a, a
   0065 87            [ 4]  148 	add	a, a
   0066 81            [ 4]  149 	add	a, c
   0067 87            [ 4]  150 	add	a, a
   0068 DD 77 FF      [19]  151 	ld	-1 (ix), a
   006B DD 36 FE 00   [19]  152 	ld	-2 (ix), #0x00
   006F                     153 00104$:
   006F DD 7E FE      [19]  154 	ld	a, -2 (ix)
   0072 D6 1A         [ 7]  155 	sub	a, #0x1a
   0074 30 2D         [12]  156 	jr	NC,00107$
                            157 ;screen_manager.c:107: devkit_SMS_setNextTileatXY( x + i, y + j );
   0076 DD 7E FE      [19]  158 	ld	a, -2 (ix)
   0079 C6 04         [ 7]  159 	add	a, #0x04
   007B C5            [11]  160 	push	bc
   007C D5            [11]  161 	push	de
   007D C5            [11]  162 	push	bc
   007E 33            [ 6]  163 	inc	sp
   007F F5            [11]  164 	push	af
   0080 33            [ 6]  165 	inc	sp
   0081 CDr00r00      [17]  166 	call	_devkit_SMS_setNextTileatXY
   0084 F1            [10]  167 	pop	af
   0085 D1            [10]  168 	pop	de
   0086 C1            [10]  169 	pop	bc
                            170 ;screen_manager.c:108: devkit_SMS_setTile( *pnt + TITLE_START + j * w + i );
   0087 6B            [ 4]  171 	ld	l, e
   0088 62            [ 4]  172 	ld	h, d
   0089 7E            [ 7]  173 	ld	a, (hl)
   008A 23            [ 6]  174 	inc	hl
   008B 66            [ 7]  175 	ld	h, (hl)
   008C C6 34         [ 7]  176 	add	a, #0x34
   008E DD 86 FF      [19]  177 	add	a, -1 (ix)
   0091 DD 86 FE      [19]  178 	add	a, -2 (ix)
   0094 C5            [11]  179 	push	bc
   0095 D5            [11]  180 	push	de
   0096 F5            [11]  181 	push	af
   0097 33            [ 6]  182 	inc	sp
   0098 CDr00r00      [17]  183 	call	_devkit_SMS_setTile
   009B 33            [ 6]  184 	inc	sp
   009C D1            [10]  185 	pop	de
   009D C1            [10]  186 	pop	bc
                            187 ;screen_manager.c:105: for( i = 0; i < w; i++ )
   009E DD 34 FE      [23]  188 	inc	-2 (ix)
   00A1 18 CC         [12]  189 	jr	00104$
   00A3                     190 00107$:
                            191 ;screen_manager.c:103: for( j = 0; j < 4; j++ )
   00A3 0C            [ 4]  192 	inc	c
   00A4 79            [ 4]  193 	ld	a, c
   00A5 D6 04         [ 7]  194 	sub	a, #0x04
   00A7 38 B5         [12]  195 	jr	C,00111$
   00A9 DD F9         [10]  196 	ld	sp, ix
   00AB DD E1         [14]  197 	pop	ix
   00AD C9            [10]  198 	ret
                            199 ;screen_manager.c:113: static void draw_tiles( unsigned char x, unsigned char y, unsigned char idx)
                            200 ;	---------------------------------
                            201 ; Function draw_tiles
                            202 ; ---------------------------------
   00AE                     203 _draw_tiles:
   00AE DD E5         [15]  204 	push	ix
   00B0 DD 21 00 00   [14]  205 	ld	ix,#0
   00B4 DD 39         [15]  206 	add	ix,sp
                            207 ;screen_manager.c:116: const unsigned int *pnt = ( const unsigned int * ) apex_tiles__tilemap__bin;
   00B6 01r00r00      [10]  208 	ld	bc, #_apex_tiles__tilemap__bin
                            209 ;screen_manager.c:118: devkit_SMS_setNextTileatXY( x + 0, y + 0 ); devkit_SMS_setTile( *pnt + idx + 0 );
   00B9 C5            [11]  210 	push	bc
   00BA DD 66 05      [19]  211 	ld	h, 5 (ix)
   00BD DD 6E 04      [19]  212 	ld	l, 4 (ix)
   00C0 E5            [11]  213 	push	hl
   00C1 CDr00r00      [17]  214 	call	_devkit_SMS_setNextTileatXY
   00C4 F1            [10]  215 	pop	af
   00C5 C1            [10]  216 	pop	bc
   00C6 69            [ 4]  217 	ld	l, c
   00C7 60            [ 4]  218 	ld	h, b
   00C8 5E            [ 7]  219 	ld	e, (hl)
   00C9 23            [ 6]  220 	inc	hl
   00CA 56            [ 7]  221 	ld	d, (hl)
   00CB 7B            [ 4]  222 	ld	a, e
   00CC DD 86 06      [19]  223 	add	a, 6 (ix)
   00CF 57            [ 4]  224 	ld	d, a
   00D0 C5            [11]  225 	push	bc
   00D1 D5            [11]  226 	push	de
   00D2 33            [ 6]  227 	inc	sp
   00D3 CDr00r00      [17]  228 	call	_devkit_SMS_setTile
   00D6 33            [ 6]  229 	inc	sp
   00D7 C1            [10]  230 	pop	bc
                            231 ;screen_manager.c:119: devkit_SMS_setNextTileatXY( x + 1, y + 0 ); devkit_SMS_setTile( *pnt + idx + 1 );
   00D8 DD 5E 04      [19]  232 	ld	e, 4 (ix)
   00DB 1C            [ 4]  233 	inc	e
   00DC C5            [11]  234 	push	bc
   00DD D5            [11]  235 	push	de
   00DE DD 56 05      [19]  236 	ld	d, 5 (ix)
   00E1 D5            [11]  237 	push	de
   00E2 CDr00r00      [17]  238 	call	_devkit_SMS_setNextTileatXY
   00E5 F1            [10]  239 	pop	af
   00E6 D1            [10]  240 	pop	de
   00E7 C1            [10]  241 	pop	bc
   00E8 69            [ 4]  242 	ld	l, c
   00E9 60            [ 4]  243 	ld	h, b
   00EA 7E            [ 7]  244 	ld	a, (hl)
   00EB 23            [ 6]  245 	inc	hl
   00EC 56            [ 7]  246 	ld	d, (hl)
   00ED DD 86 06      [19]  247 	add	a, 6 (ix)
   00F0 57            [ 4]  248 	ld	d, a
   00F1 14            [ 4]  249 	inc	d
   00F2 C5            [11]  250 	push	bc
   00F3 D5            [11]  251 	push	de
   00F4 D5            [11]  252 	push	de
   00F5 33            [ 6]  253 	inc	sp
   00F6 CDr00r00      [17]  254 	call	_devkit_SMS_setTile
   00F9 33            [ 6]  255 	inc	sp
   00FA D1            [10]  256 	pop	de
   00FB C1            [10]  257 	pop	bc
                            258 ;screen_manager.c:120: devkit_SMS_setNextTileatXY( x + 0, y + 1 ); devkit_SMS_setTile( *pnt + idx + 26 );
   00FC DD 56 05      [19]  259 	ld	d, 5 (ix)
   00FF 14            [ 4]  260 	inc	d
   0100 C5            [11]  261 	push	bc
   0101 D5            [11]  262 	push	de
   0102 D5            [11]  263 	push	de
   0103 33            [ 6]  264 	inc	sp
   0104 DD 7E 04      [19]  265 	ld	a, 4 (ix)
   0107 F5            [11]  266 	push	af
   0108 33            [ 6]  267 	inc	sp
   0109 CDr00r00      [17]  268 	call	_devkit_SMS_setNextTileatXY
   010C F1            [10]  269 	pop	af
   010D D1            [10]  270 	pop	de
   010E C1            [10]  271 	pop	bc
   010F 69            [ 4]  272 	ld	l, c
   0110 60            [ 4]  273 	ld	h, b
   0111 7E            [ 7]  274 	ld	a, (hl)
   0112 23            [ 6]  275 	inc	hl
   0113 66            [ 7]  276 	ld	h, (hl)
   0114 DD 86 06      [19]  277 	add	a, 6 (ix)
   0117 C6 1A         [ 7]  278 	add	a, #0x1a
   0119 C5            [11]  279 	push	bc
   011A D5            [11]  280 	push	de
   011B F5            [11]  281 	push	af
   011C 33            [ 6]  282 	inc	sp
   011D CDr00r00      [17]  283 	call	_devkit_SMS_setTile
   0120 33            [ 6]  284 	inc	sp
   0121 CDr00r00      [17]  285 	call	_devkit_SMS_setNextTileatXY
   0124 F1            [10]  286 	pop	af
   0125 E1            [10]  287 	pop	hl
   0126 4E            [ 7]  288 	ld	c, (hl)
   0127 23            [ 6]  289 	inc	hl
   0128 46            [ 7]  290 	ld	b, (hl)
   0129 79            [ 4]  291 	ld	a, c
   012A DD 86 06      [19]  292 	add	a, 6 (ix)
   012D C6 1B         [ 7]  293 	add	a, #0x1b
   012F 47            [ 4]  294 	ld	b, a
   0130 C5            [11]  295 	push	bc
   0131 33            [ 6]  296 	inc	sp
   0132 CDr00r00      [17]  297 	call	_devkit_SMS_setTile
   0135 33            [ 6]  298 	inc	sp
   0136 DD E1         [14]  299 	pop	ix
   0138 C9            [10]  300 	ret
                            301 	.area _CODE
                            302 	.area _INITIALIZER
                            303 	.area _CABS (ABS)
