                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_setTile
                             12 	.globl _devkit_SMS_setNextTileatXY
                             13 	.globl _engine_screen_manager_init
                             14 	.globl _engine_screen_manager_update
                             15 ;--------------------------------------------------------
                             16 ; special function registers
                             17 ;--------------------------------------------------------
                             18 ;--------------------------------------------------------
                             19 ; ram data
                             20 ;--------------------------------------------------------
                             21 	.area _DATA
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _INITIALIZED
                             26 ;--------------------------------------------------------
                             27 ; absolute external ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DABS (ABS)
                             30 ;--------------------------------------------------------
                             31 ; global & static initialisations
                             32 ;--------------------------------------------------------
                             33 	.area _HOME
                             34 	.area _GSINIT
                             35 	.area _GSFINAL
                             36 	.area _GSINIT
                             37 ;--------------------------------------------------------
                             38 ; Home
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _HOME
                             42 ;--------------------------------------------------------
                             43 ; code
                             44 ;--------------------------------------------------------
                             45 	.area _CODE
                             46 ;screen_manager.c:15: void engine_screen_manager_init()
                             47 ;	---------------------------------
                             48 ; Function engine_screen_manager_init
                             49 ; ---------------------------------
   0000                      50 _engine_screen_manager_init::
                             51 ;screen_manager.c:40: draw_titile();
   0000 C3r04r00      [10]   52 	jp  _draw_titile
                             53 ;screen_manager.c:43: void engine_screen_manager_update()
                             54 ;	---------------------------------
                             55 ; Function engine_screen_manager_update
                             56 ; ---------------------------------
   0003                      57 _engine_screen_manager_update::
                             58 ;screen_manager.c:67: }
   0003 C9            [10]   59 	ret
                             60 ;screen_manager.c:69: static void draw_titile()
                             61 ;	---------------------------------
                             62 ; Function draw_titile
                             63 ; ---------------------------------
   0004                      64 _draw_titile:
   0004 DD E5         [15]   65 	push	ix
   0006 DD 21 00 00   [14]   66 	ld	ix,#0
   000A DD 39         [15]   67 	add	ix,sp
   000C F5            [11]   68 	push	af
                             69 ;screen_manager.c:71: const unsigned int *pnt = ( const unsigned int * ) game_title__tilemap__bin;
   000D 01r00r00      [10]   70 	ld	bc, #_game_title__tilemap__bin+0
   0010 33            [ 6]   71 	inc	sp
   0011 33            [ 6]   72 	inc	sp
   0012 C5            [11]   73 	push	bc
                             74 ;screen_manager.c:80: for( j = 0; j < 4; j++ )
   0013 0E 00         [ 7]   75 	ld	c, #0x00
                             76 ;screen_manager.c:82: for( i = 0; i < 26; i++ )
   0015                      77 00109$:
   0015 41            [ 4]   78 	ld	b, c
   0016 04            [ 4]   79 	inc	b
   0017 04            [ 4]   80 	inc	b
   0018 79            [ 4]   81 	ld	a, c
   0019 87            [ 4]   82 	add	a, a
   001A 81            [ 4]   83 	add	a, c
   001B 87            [ 4]   84 	add	a, a
   001C 87            [ 4]   85 	add	a, a
   001D 81            [ 4]   86 	add	a, c
   001E 87            [ 4]   87 	add	a, a
   001F 5F            [ 4]   88 	ld	e, a
   0020 16 00         [ 7]   89 	ld	d, #0x00
   0022                      90 00103$:
                             91 ;screen_manager.c:84: devkit_SMS_setNextTileatXY( x + i, y + j );
   0022 7A            [ 4]   92 	ld	a, d
   0023 C6 04         [ 7]   93 	add	a, #0x04
   0025 C5            [11]   94 	push	bc
   0026 D5            [11]   95 	push	de
   0027 C5            [11]   96 	push	bc
   0028 33            [ 6]   97 	inc	sp
   0029 F5            [11]   98 	push	af
   002A 33            [ 6]   99 	inc	sp
   002B CDr00r00      [17]  100 	call	_devkit_SMS_setNextTileatXY
   002E F1            [10]  101 	pop	af
   002F D1            [10]  102 	pop	de
   0030 C1            [10]  103 	pop	bc
                            104 ;screen_manager.c:85: devkit_SMS_setTile( *pnt + j * 26 + i );
   0031 E1            [10]  105 	pop	hl
   0032 E5            [11]  106 	push	hl
   0033 7E            [ 7]  107 	ld	a, (hl)
   0034 23            [ 6]  108 	inc	hl
   0035 66            [ 7]  109 	ld	h, (hl)
   0036 6F            [ 4]  110 	ld	l, a
   0037 19            [11]  111 	add	hl, de
   0038 7D            [ 4]  112 	ld	a, l
   0039 82            [ 4]  113 	add	a, d
   003A C5            [11]  114 	push	bc
   003B D5            [11]  115 	push	de
   003C F5            [11]  116 	push	af
   003D 33            [ 6]  117 	inc	sp
   003E CDr00r00      [17]  118 	call	_devkit_SMS_setTile
   0041 33            [ 6]  119 	inc	sp
   0042 D1            [10]  120 	pop	de
   0043 C1            [10]  121 	pop	bc
                            122 ;screen_manager.c:82: for( i = 0; i < 26; i++ )
   0044 14            [ 4]  123 	inc	d
   0045 7A            [ 4]  124 	ld	a, d
   0046 D6 1A         [ 7]  125 	sub	a, #0x1a
   0048 38 D8         [12]  126 	jr	C,00103$
                            127 ;screen_manager.c:80: for( j = 0; j < 4; j++ )
   004A 0C            [ 4]  128 	inc	c
   004B 79            [ 4]  129 	ld	a, c
   004C D6 04         [ 7]  130 	sub	a, #0x04
   004E 38 C5         [12]  131 	jr	C,00109$
   0050 DD F9         [10]  132 	ld	sp, ix
   0052 DD E1         [14]  133 	pop	ix
   0054 C9            [10]  134 	ret
                            135 ;screen_manager.c:90: static void draw_tiles( unsigned char x, unsigned char y, unsigned char idx)
                            136 ;	---------------------------------
                            137 ; Function draw_tiles
                            138 ; ---------------------------------
   0055                     139 _draw_tiles:
   0055 DD E5         [15]  140 	push	ix
   0057 DD 21 00 00   [14]  141 	ld	ix,#0
   005B DD 39         [15]  142 	add	ix,sp
                            143 ;screen_manager.c:92: const unsigned char *pnt = data_tiles__tilemap__bin;
                            144 ;screen_manager.c:94: devkit_SMS_setNextTileatXY( x + 0, y + 0 ); devkit_SMS_setTile( *pnt + idx + 0 );
   005D DD 66 05      [19]  145 	ld	h, 5 (ix)
   0060 DD 6E 04      [19]  146 	ld	l, 4 (ix)
   0063 E5            [11]  147 	push	hl
   0064 CDr00r00      [17]  148 	call	_devkit_SMS_setNextTileatXY
   0067 F1            [10]  149 	pop	af
   0068 21r00r00      [10]  150 	ld	hl, #_data_tiles__tilemap__bin + 0
   006B 4E            [ 7]  151 	ld	c, (hl)
   006C 79            [ 4]  152 	ld	a, c
   006D DD 86 06      [19]  153 	add	a, 6 (ix)
   0070 47            [ 4]  154 	ld	b, a
   0071 C5            [11]  155 	push	bc
   0072 33            [ 6]  156 	inc	sp
   0073 CDr00r00      [17]  157 	call	_devkit_SMS_setTile
   0076 33            [ 6]  158 	inc	sp
                            159 ;screen_manager.c:95: devkit_SMS_setNextTileatXY( x + 1, y + 0 ); devkit_SMS_setTile( *pnt + idx + 1 );
   0077 DD 4E 04      [19]  160 	ld	c, 4 (ix)
   007A 0C            [ 4]  161 	inc	c
   007B C5            [11]  162 	push	bc
   007C DD 46 05      [19]  163 	ld	b, 5 (ix)
   007F C5            [11]  164 	push	bc
   0080 CDr00r00      [17]  165 	call	_devkit_SMS_setNextTileatXY
   0083 F1            [10]  166 	pop	af
   0084 C1            [10]  167 	pop	bc
   0085 3Ar00r00      [13]  168 	ld	a,(#_data_tiles__tilemap__bin + 0)
   0088 DD 86 06      [19]  169 	add	a, 6 (ix)
   008B 47            [ 4]  170 	ld	b, a
   008C 04            [ 4]  171 	inc	b
   008D C5            [11]  172 	push	bc
   008E C5            [11]  173 	push	bc
   008F 33            [ 6]  174 	inc	sp
   0090 CDr00r00      [17]  175 	call	_devkit_SMS_setTile
   0093 33            [ 6]  176 	inc	sp
   0094 C1            [10]  177 	pop	bc
                            178 ;screen_manager.c:96: devkit_SMS_setNextTileatXY( x + 0, y + 1 ); devkit_SMS_setTile( *pnt + idx + 2 );
   0095 DD 46 05      [19]  179 	ld	b, 5 (ix)
   0098 04            [ 4]  180 	inc	b
   0099 C5            [11]  181 	push	bc
   009A C5            [11]  182 	push	bc
   009B 33            [ 6]  183 	inc	sp
   009C DD 7E 04      [19]  184 	ld	a, 4 (ix)
   009F F5            [11]  185 	push	af
   00A0 33            [ 6]  186 	inc	sp
   00A1 CDr00r00      [17]  187 	call	_devkit_SMS_setNextTileatXY
   00A4 F1            [10]  188 	pop	af
   00A5 C1            [10]  189 	pop	bc
   00A6 3Ar00r00      [13]  190 	ld	a,(#_data_tiles__tilemap__bin + 0)
   00A9 DD 86 06      [19]  191 	add	a, 6 (ix)
   00AC C6 02         [ 7]  192 	add	a, #0x02
   00AE C5            [11]  193 	push	bc
   00AF F5            [11]  194 	push	af
   00B0 33            [ 6]  195 	inc	sp
   00B1 CDr00r00      [17]  196 	call	_devkit_SMS_setTile
   00B4 33            [ 6]  197 	inc	sp
   00B5 CDr00r00      [17]  198 	call	_devkit_SMS_setNextTileatXY
   00B8 F1            [10]  199 	pop	af
   00B9 3Ar00r00      [13]  200 	ld	a,(#_data_tiles__tilemap__bin + 0)
   00BC DD 86 06      [19]  201 	add	a, 6 (ix)
   00BF C6 03         [ 7]  202 	add	a, #0x03
   00C1 F5            [11]  203 	push	af
   00C2 33            [ 6]  204 	inc	sp
   00C3 CDr00r00      [17]  205 	call	_devkit_SMS_setTile
   00C6 33            [ 6]  206 	inc	sp
   00C7 DD E1         [14]  207 	pop	ix
   00C9 C9            [10]  208 	ret
                            209 	.area _CODE
                            210 	.area _INITIALIZER
                            211 	.area _CABS (ABS)
