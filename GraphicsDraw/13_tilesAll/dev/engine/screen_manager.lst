                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.9 #9960 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module screen_manager
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _devkit_SMS_addSprite
                             12 	.globl _devkit_SMS_setTile
                             13 	.globl _devkit_SMS_setNextTileatXY
                             14 	.globl _engine_screen_manager_init
                             15 	.globl _engine_screen_manager_update
                             16 ;--------------------------------------------------------
                             17 ; special function registers
                             18 ;--------------------------------------------------------
                             19 ;--------------------------------------------------------
                             20 ; ram data
                             21 ;--------------------------------------------------------
                             22 	.area _DATA
                             23 ;--------------------------------------------------------
                             24 ; ram data
                             25 ;--------------------------------------------------------
                             26 	.area _INITIALIZED
                             27 ;--------------------------------------------------------
                             28 ; absolute external ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DABS (ABS)
                             31 ;--------------------------------------------------------
                             32 ; global & static initialisations
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _GSINIT
                             36 	.area _GSFINAL
                             37 	.area _GSINIT
                             38 ;--------------------------------------------------------
                             39 ; Home
                             40 ;--------------------------------------------------------
                             41 	.area _HOME
                             42 	.area _HOME
                             43 ;--------------------------------------------------------
                             44 ; code
                             45 ;--------------------------------------------------------
                             46 	.area _CODE
                             47 ;screen_manager.c:16: void engine_screen_manager_init()
                             48 ;	---------------------------------
                             49 ; Function engine_screen_manager_init
                             50 ; ---------------------------------
   0000                      51 _engine_screen_manager_init::
                             52 ;screen_manager.c:22: for( x = 2; x < 32; x += 2 )
   0000 06 02         [ 7]   53 	ld	b, #0x02
   0002                      54 00103$:
                             55 ;screen_manager.c:24: draw_tiles( x, 0, 0 );
   0002 C5            [11]   56 	push	bc
   0003 21 00 00      [10]   57 	ld	hl, #0x0000
   0006 E5            [11]   58 	push	hl
   0007 C5            [11]   59 	push	bc
   0008 33            [ 6]   60 	inc	sp
   0009 CDrBDr00      [17]   61 	call	_draw_tiles
   000C F1            [10]   62 	pop	af
   000D 33            [ 6]   63 	inc	sp
   000E C1            [10]   64 	pop	bc
                             65 ;screen_manager.c:25: draw_tiles( x, 22, 0 );
   000F C5            [11]   66 	push	bc
   0010 21 16 00      [10]   67 	ld	hl, #0x0016
   0013 E5            [11]   68 	push	hl
   0014 C5            [11]   69 	push	bc
   0015 33            [ 6]   70 	inc	sp
   0016 CDrBDr00      [17]   71 	call	_draw_tiles
   0019 F1            [10]   72 	pop	af
   001A 33            [ 6]   73 	inc	sp
   001B C1            [10]   74 	pop	bc
                             75 ;screen_manager.c:22: for( x = 2; x < 32; x += 2 )
   001C 04            [ 4]   76 	inc	b
   001D 04            [ 4]   77 	inc	b
   001E 78            [ 4]   78 	ld	a, b
   001F D6 20         [ 7]   79 	sub	a, #0x20
   0021 38 DF         [12]   80 	jr	C,00103$
                             81 ;screen_manager.c:27: for( y = 2; y < 22; y += 2 )
   0023 06 02         [ 7]   82 	ld	b, #0x02
   0025                      83 00105$:
                             84 ;screen_manager.c:29: draw_tiles( 2, y, 0 );
   0025 C5            [11]   85 	push	bc
   0026 AF            [ 4]   86 	xor	a, a
   0027 F5            [11]   87 	push	af
   0028 33            [ 6]   88 	inc	sp
   0029 C5            [11]   89 	push	bc
   002A 33            [ 6]   90 	inc	sp
   002B 3E 02         [ 7]   91 	ld	a, #0x02
   002D F5            [11]   92 	push	af
   002E 33            [ 6]   93 	inc	sp
   002F CDrBDr00      [17]   94 	call	_draw_tiles
   0032 F1            [10]   95 	pop	af
   0033 33            [ 6]   96 	inc	sp
   0034 C1            [10]   97 	pop	bc
                             98 ;screen_manager.c:30: draw_tiles( 30, y, 0 );
   0035 C5            [11]   99 	push	bc
   0036 AF            [ 4]  100 	xor	a, a
   0037 F5            [11]  101 	push	af
   0038 33            [ 6]  102 	inc	sp
   0039 C5            [11]  103 	push	bc
   003A 33            [ 6]  104 	inc	sp
   003B 3E 1E         [ 7]  105 	ld	a, #0x1e
   003D F5            [11]  106 	push	af
   003E 33            [ 6]  107 	inc	sp
   003F CDrBDr00      [17]  108 	call	_draw_tiles
   0042 F1            [10]  109 	pop	af
   0043 33            [ 6]  110 	inc	sp
   0044 C1            [10]  111 	pop	bc
                            112 ;screen_manager.c:27: for( y = 2; y < 22; y += 2 )
   0045 04            [ 4]  113 	inc	b
   0046 04            [ 4]  114 	inc	b
   0047 78            [ 4]  115 	ld	a, b
   0048 D6 16         [ 7]  116 	sub	a, #0x16
   004A 38 D9         [12]  117 	jr	C,00105$
                            118 ;screen_manager.c:42: draw_tiles( 20, 8, 8 );
   004C 21 08 08      [10]  119 	ld	hl, #0x0808
   004F E5            [11]  120 	push	hl
   0050 3E 14         [ 7]  121 	ld	a, #0x14
   0052 F5            [11]  122 	push	af
   0053 33            [ 6]  123 	inc	sp
   0054 CDrBDr00      [17]  124 	call	_draw_tiles
   0057 F1            [10]  125 	pop	af
   0058 33            [ 6]  126 	inc	sp
                            127 ;screen_manager.c:57: draw_title();
   0059 C3r5Fr00      [10]  128 	jp  _draw_title
                            129 ;screen_manager.c:62: void engine_screen_manager_update()
                            130 ;	---------------------------------
                            131 ; Function engine_screen_manager_update
                            132 ; ---------------------------------
   005C                     133 _engine_screen_manager_update::
                            134 ;screen_manager.c:87: draw_skullnc();
   005C C3r7Ar01      [10]  135 	jp  _draw_skullnc
                            136 ;screen_manager.c:91: static void draw_title()
                            137 ;	---------------------------------
                            138 ; Function draw_title
                            139 ; ---------------------------------
   005F                     140 _draw_title:
   005F DD E5         [15]  141 	push	ix
   0061 DD 21 00 00   [14]  142 	ld	ix,#0
   0065 DD 39         [15]  143 	add	ix,sp
   0067 F5            [11]  144 	push	af
                            145 ;screen_manager.c:94: const unsigned int *pnt = ( const unsigned int * ) apex_tiles__tilemap__bin;
   0068 11r00r00      [10]  146 	ld	de, #_apex_tiles__tilemap__bin+0
                            147 ;screen_manager.c:106: for( j = 0; j < 4; j++ )
   006B 0E 00         [ 7]  148 	ld	c, #0x00
                            149 ;screen_manager.c:108: for( i = 0; i < w; i++ )
   006D                     150 00111$:
   006D 41            [ 4]  151 	ld	b, c
   006E 04            [ 4]  152 	inc	b
   006F 04            [ 4]  153 	inc	b
   0070 79            [ 4]  154 	ld	a, c
   0071 87            [ 4]  155 	add	a, a
   0072 81            [ 4]  156 	add	a, c
   0073 87            [ 4]  157 	add	a, a
   0074 87            [ 4]  158 	add	a, a
   0075 81            [ 4]  159 	add	a, c
   0076 87            [ 4]  160 	add	a, a
   0077 DD 77 FF      [19]  161 	ld	-1 (ix), a
   007A DD 36 FE 00   [19]  162 	ld	-2 (ix), #0x00
   007E                     163 00104$:
   007E DD 7E FE      [19]  164 	ld	a, -2 (ix)
   0081 D6 1A         [ 7]  165 	sub	a, #0x1a
   0083 30 2D         [12]  166 	jr	NC,00107$
                            167 ;screen_manager.c:110: devkit_SMS_setNextTileatXY( x + i, y + j );
   0085 DD 7E FE      [19]  168 	ld	a, -2 (ix)
   0088 C6 04         [ 7]  169 	add	a, #0x04
   008A C5            [11]  170 	push	bc
   008B D5            [11]  171 	push	de
   008C C5            [11]  172 	push	bc
   008D 33            [ 6]  173 	inc	sp
   008E F5            [11]  174 	push	af
   008F 33            [ 6]  175 	inc	sp
   0090 CDr00r00      [17]  176 	call	_devkit_SMS_setNextTileatXY
   0093 F1            [10]  177 	pop	af
   0094 D1            [10]  178 	pop	de
   0095 C1            [10]  179 	pop	bc
                            180 ;screen_manager.c:111: devkit_SMS_setTile( *pnt + TITLE_START + j * w + i );
   0096 6B            [ 4]  181 	ld	l, e
   0097 62            [ 4]  182 	ld	h, d
   0098 7E            [ 7]  183 	ld	a, (hl)
   0099 23            [ 6]  184 	inc	hl
   009A 66            [ 7]  185 	ld	h, (hl)
   009B C6 34         [ 7]  186 	add	a, #0x34
   009D DD 86 FF      [19]  187 	add	a, -1 (ix)
   00A0 DD 86 FE      [19]  188 	add	a, -2 (ix)
   00A3 C5            [11]  189 	push	bc
   00A4 D5            [11]  190 	push	de
   00A5 F5            [11]  191 	push	af
   00A6 33            [ 6]  192 	inc	sp
   00A7 CDr00r00      [17]  193 	call	_devkit_SMS_setTile
   00AA 33            [ 6]  194 	inc	sp
   00AB D1            [10]  195 	pop	de
   00AC C1            [10]  196 	pop	bc
                            197 ;screen_manager.c:108: for( i = 0; i < w; i++ )
   00AD DD 34 FE      [23]  198 	inc	-2 (ix)
   00B0 18 CC         [12]  199 	jr	00104$
   00B2                     200 00107$:
                            201 ;screen_manager.c:106: for( j = 0; j < 4; j++ )
   00B2 0C            [ 4]  202 	inc	c
   00B3 79            [ 4]  203 	ld	a, c
   00B4 D6 04         [ 7]  204 	sub	a, #0x04
   00B6 38 B5         [12]  205 	jr	C,00111$
   00B8 DD F9         [10]  206 	ld	sp, ix
   00BA DD E1         [14]  207 	pop	ix
   00BC C9            [10]  208 	ret
                            209 ;screen_manager.c:116: static void draw_tiles( unsigned char x, unsigned char y, unsigned char idx)
                            210 ;	---------------------------------
                            211 ; Function draw_tiles
                            212 ; ---------------------------------
   00BD                     213 _draw_tiles:
   00BD DD E5         [15]  214 	push	ix
   00BF DD 21 00 00   [14]  215 	ld	ix,#0
   00C3 DD 39         [15]  216 	add	ix,sp
                            217 ;screen_manager.c:119: const unsigned int *pnt = ( const unsigned int * ) apex_tiles__tilemap__bin;
   00C5 01r00r00      [10]  218 	ld	bc, #_apex_tiles__tilemap__bin
                            219 ;screen_manager.c:121: devkit_SMS_setNextTileatXY( x + 0, y + 0 ); devkit_SMS_setTile( *pnt + idx + 0 );
   00C8 C5            [11]  220 	push	bc
   00C9 DD 66 05      [19]  221 	ld	h, 5 (ix)
   00CC DD 6E 04      [19]  222 	ld	l, 4 (ix)
   00CF E5            [11]  223 	push	hl
   00D0 CDr00r00      [17]  224 	call	_devkit_SMS_setNextTileatXY
   00D3 F1            [10]  225 	pop	af
   00D4 C1            [10]  226 	pop	bc
   00D5 69            [ 4]  227 	ld	l, c
   00D6 60            [ 4]  228 	ld	h, b
   00D7 5E            [ 7]  229 	ld	e, (hl)
   00D8 23            [ 6]  230 	inc	hl
   00D9 56            [ 7]  231 	ld	d, (hl)
   00DA 7B            [ 4]  232 	ld	a, e
   00DB DD 86 06      [19]  233 	add	a, 6 (ix)
   00DE 57            [ 4]  234 	ld	d, a
   00DF C5            [11]  235 	push	bc
   00E0 D5            [11]  236 	push	de
   00E1 33            [ 6]  237 	inc	sp
   00E2 CDr00r00      [17]  238 	call	_devkit_SMS_setTile
   00E5 33            [ 6]  239 	inc	sp
   00E6 C1            [10]  240 	pop	bc
                            241 ;screen_manager.c:122: devkit_SMS_setNextTileatXY( x + 1, y + 0 ); devkit_SMS_setTile( *pnt + idx + 1 );
   00E7 DD 5E 04      [19]  242 	ld	e, 4 (ix)
   00EA 1C            [ 4]  243 	inc	e
   00EB C5            [11]  244 	push	bc
   00EC D5            [11]  245 	push	de
   00ED DD 56 05      [19]  246 	ld	d, 5 (ix)
   00F0 D5            [11]  247 	push	de
   00F1 CDr00r00      [17]  248 	call	_devkit_SMS_setNextTileatXY
   00F4 F1            [10]  249 	pop	af
   00F5 D1            [10]  250 	pop	de
   00F6 C1            [10]  251 	pop	bc
   00F7 69            [ 4]  252 	ld	l, c
   00F8 60            [ 4]  253 	ld	h, b
   00F9 7E            [ 7]  254 	ld	a, (hl)
   00FA 23            [ 6]  255 	inc	hl
   00FB 56            [ 7]  256 	ld	d, (hl)
   00FC DD 86 06      [19]  257 	add	a, 6 (ix)
   00FF 57            [ 4]  258 	ld	d, a
   0100 14            [ 4]  259 	inc	d
   0101 C5            [11]  260 	push	bc
   0102 D5            [11]  261 	push	de
   0103 D5            [11]  262 	push	de
   0104 33            [ 6]  263 	inc	sp
   0105 CDr00r00      [17]  264 	call	_devkit_SMS_setTile
   0108 33            [ 6]  265 	inc	sp
   0109 D1            [10]  266 	pop	de
   010A C1            [10]  267 	pop	bc
                            268 ;screen_manager.c:123: devkit_SMS_setNextTileatXY( x + 0, y + 1 ); devkit_SMS_setTile( *pnt + idx + 26 );
   010B DD 56 05      [19]  269 	ld	d, 5 (ix)
   010E 14            [ 4]  270 	inc	d
   010F C5            [11]  271 	push	bc
   0110 D5            [11]  272 	push	de
   0111 D5            [11]  273 	push	de
   0112 33            [ 6]  274 	inc	sp
   0113 DD 7E 04      [19]  275 	ld	a, 4 (ix)
   0116 F5            [11]  276 	push	af
   0117 33            [ 6]  277 	inc	sp
   0118 CDr00r00      [17]  278 	call	_devkit_SMS_setNextTileatXY
   011B F1            [10]  279 	pop	af
   011C D1            [10]  280 	pop	de
   011D C1            [10]  281 	pop	bc
   011E 69            [ 4]  282 	ld	l, c
   011F 60            [ 4]  283 	ld	h, b
   0120 7E            [ 7]  284 	ld	a, (hl)
   0121 23            [ 6]  285 	inc	hl
   0122 66            [ 7]  286 	ld	h, (hl)
   0123 DD 86 06      [19]  287 	add	a, 6 (ix)
   0126 C6 1A         [ 7]  288 	add	a, #0x1a
   0128 C5            [11]  289 	push	bc
   0129 D5            [11]  290 	push	de
   012A F5            [11]  291 	push	af
   012B 33            [ 6]  292 	inc	sp
   012C CDr00r00      [17]  293 	call	_devkit_SMS_setTile
   012F 33            [ 6]  294 	inc	sp
   0130 CDr00r00      [17]  295 	call	_devkit_SMS_setNextTileatXY
   0133 F1            [10]  296 	pop	af
   0134 E1            [10]  297 	pop	hl
   0135 4E            [ 7]  298 	ld	c, (hl)
   0136 23            [ 6]  299 	inc	hl
   0137 46            [ 7]  300 	ld	b, (hl)
   0138 79            [ 4]  301 	ld	a, c
   0139 DD 86 06      [19]  302 	add	a, 6 (ix)
   013C C6 1B         [ 7]  303 	add	a, #0x1b
   013E 47            [ 4]  304 	ld	b, a
   013F C5            [11]  305 	push	bc
   0140 33            [ 6]  306 	inc	sp
   0141 CDr00r00      [17]  307 	call	_devkit_SMS_setTile
   0144 33            [ 6]  308 	inc	sp
   0145 DD E1         [14]  309 	pop	ix
   0147 C9            [10]  310 	ret
                            311 ;screen_manager.c:126: static void draw_candykd()
                            312 ;	---------------------------------
                            313 ; Function draw_candykd
                            314 ; ---------------------------------
   0148                     315 _draw_candykd:
                            316 ;screen_manager.c:132: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   0148 21 60 01      [10]  317 	ld	hl, #0x0160
   014B E5            [11]  318 	push	hl
   014C 21 B0 40      [10]  319 	ld	hl, #0x40b0
   014F E5            [11]  320 	push	hl
   0150 CDr00r00      [17]  321 	call	_devkit_SMS_addSprite
   0153 F1            [10]  322 	pop	af
                            323 ;screen_manager.c:133: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   0154 21 61 01      [10]  324 	ld	hl, #0x0161
   0157 E3            [19]  325 	ex	(sp),hl
   0158 21 B8 40      [10]  326 	ld	hl, #0x40b8
   015B E5            [11]  327 	push	hl
   015C CDr00r00      [17]  328 	call	_devkit_SMS_addSprite
   015F F1            [10]  329 	pop	af
                            330 ;screen_manager.c:134: devkit_SMS_addSprite( x + 0, y + 8, tile + 6 );
   0160 21 66 01      [10]  331 	ld	hl, #0x0166
   0163 E3            [19]  332 	ex	(sp),hl
   0164 21 B0 48      [10]  333 	ld	hl, #0x48b0
   0167 E5            [11]  334 	push	hl
   0168 CDr00r00      [17]  335 	call	_devkit_SMS_addSprite
   016B F1            [10]  336 	pop	af
                            337 ;screen_manager.c:135: devkit_SMS_addSprite( x + 8, y + 8, tile + 7 );
   016C 21 67 01      [10]  338 	ld	hl, #0x0167
   016F E3            [19]  339 	ex	(sp),hl
   0170 21 B8 48      [10]  340 	ld	hl, #0x48b8
   0173 E5            [11]  341 	push	hl
   0174 CDr00r00      [17]  342 	call	_devkit_SMS_addSprite
   0177 F1            [10]  343 	pop	af
   0178 F1            [10]  344 	pop	af
   0179 C9            [10]  345 	ret
                            346 ;screen_manager.c:137: static void draw_skullnc()
                            347 ;	---------------------------------
                            348 ; Function draw_skullnc
                            349 ; ---------------------------------
   017A                     350 _draw_skullnc:
                            351 ;screen_manager.c:143: devkit_SMS_addSprite( x + 0, y + 0, tile + 0 );
   017A 21 6E 01      [10]  352 	ld	hl, #0x016e
   017D E5            [11]  353 	push	hl
   017E 21 E0 40      [10]  354 	ld	hl, #0x40e0
   0181 E5            [11]  355 	push	hl
   0182 CDr00r00      [17]  356 	call	_devkit_SMS_addSprite
   0185 F1            [10]  357 	pop	af
                            358 ;screen_manager.c:144: devkit_SMS_addSprite( x + 8, y + 0, tile + 1 );
   0186 21 6F 01      [10]  359 	ld	hl, #0x016f
   0189 E3            [19]  360 	ex	(sp),hl
   018A 21 E8 40      [10]  361 	ld	hl, #0x40e8
   018D E5            [11]  362 	push	hl
   018E CDr00r00      [17]  363 	call	_devkit_SMS_addSprite
   0191 F1            [10]  364 	pop	af
                            365 ;screen_manager.c:145: devkit_SMS_addSprite( x + 0, y + 8, tile + 6 );
   0192 21 74 01      [10]  366 	ld	hl, #0x0174
   0195 E3            [19]  367 	ex	(sp),hl
   0196 21 E0 48      [10]  368 	ld	hl, #0x48e0
   0199 E5            [11]  369 	push	hl
   019A CDr00r00      [17]  370 	call	_devkit_SMS_addSprite
   019D F1            [10]  371 	pop	af
                            372 ;screen_manager.c:146: devkit_SMS_addSprite( x + 8, y + 8, tile + 7 );
   019E 21 75 01      [10]  373 	ld	hl, #0x0175
   01A1 E3            [19]  374 	ex	(sp),hl
   01A2 21 E8 48      [10]  375 	ld	hl, #0x48e8
   01A5 E5            [11]  376 	push	hl
   01A6 CDr00r00      [17]  377 	call	_devkit_SMS_addSprite
   01A9 F1            [10]  378 	pop	af
   01AA F1            [10]  379 	pop	af
   01AB C9            [10]  380 	ret
                            381 	.area _CODE
                            382 	.area _INITIALIZER
                            383 	.area _CABS (ABS)
